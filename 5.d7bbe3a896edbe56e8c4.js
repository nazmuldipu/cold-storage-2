(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"O+Ta":function(e,t,o){"use strict";o.r(t),o.d(t,"ROUTES",function(){return Xe}),o.d(t,"DashboardModule",function(){return We});var i=o("tyNb"),n=o("KZX/"),r=o("fXoL");let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["app-index"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Pb(0,"p"),r.wc(1,"index works!"),r.Ob())},styles:[""]}),e})();var c=o("1kSV"),a=o("ofXK");function l(e,t){if(1&e){const e=r.Qb();r.Pb(0,"li",9),r.Pb(1,"a",13),r.Zb("click",function(){return r.oc(e),r.bc(2).toggleCollapse()}),r.wc(2),r.Ob(),r.Ob()}if(2&e){const e=r.bc().$implicit;r.yb(1),r.gc("routerLink",e.link),r.yb(1),r.xc(e.name)}}function b(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",18),r.Zb("click",function(){return r.oc(e),r.bc(3).toggleCollapse()}),r.wc(1),r.Ob()}if(2&e){const e=t.$implicit;r.gc("routerLink",e.link),r.yb(1),r.xc(e.name)}}function d(e,t){if(1&e&&(r.Pb(0,"li",14),r.Pb(1,"a",15),r.Zb("click",function(){return!1}),r.wc(2),r.Ob(),r.Pb(3,"div",16),r.uc(4,b,2,2,"button",17),r.Ob(),r.Ob()),2&e){const e=r.bc().$implicit;r.yb(2),r.xc(e.name),r.yb(2),r.gc("ngForOf",e.subnav)}}function h(e,t){if(1&e&&(r.Nb(0),r.uc(1,l,3,2,"li",11),r.uc(2,d,5,2,"li",12),r.Mb()),2&e){const e=t.$implicit;r.yb(1),r.gc("ngIf",0==(null==e||null==e.subnav?null:e.subnav.length)),r.yb(1),r.gc("ngIf",(null==e||null==e.subnav?null:e.subnav.length)>0)}}let m=(()=>{class e{constructor(){this.show=!1,this.nav_data=[{name:"Dashboard",link:"/dashboard",icon:"fa-home",subnav:[]},{name:"Inventory Setting",icon:"fa-home",subnav:[{name:"Add Chamber",icon:"fa-plus",link:"/dashboard/chamber"},{name:"Add Floor",icon:"fa-plus",link:"/dashboard/floor"},{name:"Add Line",icon:"fa-plus",link:"/dashboard/line"},{name:"Add Pocket",icon:"fa-plus",link:"/dashboard/pocket"}]},{name:"Loading",icon:"fa-cubes",subnav:[{name:"Agent",icon:"fa-plus",link:"/dashboard/agent"},{name:"Loading Party",icon:"fa-plus",link:"/dashboard/customer"},{name:"Loading Registration",icon:"fa-plus",link:"/dashboard/add-loading"},{name:"Loading List",icon:"fa-plus",link:"/dashboard/loading"}]},{name:"Loading Report",icon:"fa-cubes",subnav:[{name:"Daily Load",icon:"fa-plus",link:"/dashboard/products/brands"},{name:"SR to SR laod",icon:"fa-plus",link:"/dashboard/products/brands"},{name:"Loading Summary",icon:"fa-plus",link:"/dashboard/products/brands"},{name:"All Loading",icon:"fa-plus",link:"/dashboard/products/brands"},{name:"Party Ledger",icon:"fa-plus",link:"/dashboard/products/brands"},{name:"ALl Loding Party",icon:"fa-plus",link:"/dashboard/products/brands"}]},{name:"Chembering",icon:"fa-archive",subnav:[{name:"Brands",icon:"fa-tags",link:"/dashboard/products/brands"},{name:"Shops",icon:"fa-shopping-bag",link:"/dashboard/products/shops"}]},{name:"General Setting",icon:"fa-cog",subnav:[{name:"User",icon:"fa-user",link:"/dashboard/user"},{name:"Role",icon:"fa-shopping-bag",link:"/dashboard/role"},{name:"Company",icon:"fa-building",link:"/dashboard/company"}]},{name:"Accessories",link:"/dashboard/categories/add",icon:"fa-sign-language ",subCagegories:[]}]}ngOnInit(){}toggleCollapse(){this.show=!this.show}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["dash-nav"]],decls:16,vars:3,consts:[["aria-label","Fourth navbar example",1,"navbar","navbar-expand-md","navbar-dark","bg-primary-dark"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand",3,"click"],["type","button","data-bs-toggle","collapse","data-bs-target","#dashNav","aria-controls","dashNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["id","dashNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto","mb-2","mb-md-0"],[4,"ngFor","ngForOf"],[1,"navbar-nav","mb-2","mb-md-0"],[1,"nav-item"],["routerLink","/login",1,"nav-link"],["class","nav-item",4,"ngIf"],["ngbDropdown","","class","nav-item",4,"ngIf"],[1,"nav-link",3,"routerLink","click"],["ngbDropdown","",1,"nav-item"],["href","","ngbDropdownToggle","",1,"nav-link",3,"click"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"routerLink","click",4,"ngFor","ngForOf"],["ngbDropdownItem","",3,"routerLink","click"]],template:function(e,t){1&e&&(r.Pb(0,"nav",0),r.Pb(1,"div",1),r.Pb(2,"a",2),r.Zb("click",function(){return t.toggleCollapse()}),r.wc(3,"UNOLO Ltd."),r.Ob(),r.Pb(4,"button",3),r.Zb("click",function(){return t.toggleCollapse()}),r.Lb(5,"span",4),r.Ob(),r.Pb(6,"div",5),r.Pb(7,"ul",6),r.uc(8,h,3,2,"ng-container",7),r.Ob(),r.Pb(9,"ul",8),r.Pb(10,"li",9),r.Pb(11,"a",10),r.wc(12,"Login"),r.Ob(),r.Ob(),r.Pb(13,"li",9),r.Pb(14,"a",10),r.wc(15,"Logout"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.yb(6),r.Cb("show",t.show),r.yb(2),r.gc("ngForOf",t.nav_data))},directives:[c.f,i.c,a.k,a.l,c.a,c.d,c.c,c.b,i.b],styles:[".nav-link[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%], .navbar-brand[_ngcontent-%COMP%]{display:block;padding:0}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.nav-link[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]{font-size:14px}.dropdown-item[_ngcontent-%COMP%]{font-size:14px;padding:0 8px;border-bottom:1px solid #eaeaea}"]}),e})(),u=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Lb(0,"dash-nav"),r.Lb(1,"router-outlet"))},directives:[m,i.e],styles:[""]}),e})();function g(e,t,o,i){return new(o||(o=Promise))(function(n,r){function s(e){try{a(i.next(e))}catch(t){r(t)}}function c(e){try{a(i.throw(e))}catch(t){r(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,c)}a((i=i.apply(e,t||[])).next())})}var f=o("ZmEn"),p=o("z3bE"),O=o("3Pt+");function P(e,t){if(1&e&&(r.Pb(0,"div",15),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.errorMessage,"\n")}}function v(e,t){1&e&&(r.Pb(0,"small",16),r.wc(1,"Chamber Name Required"),r.Ob())}function y(e,t){1&e&&(r.Pb(0,"small",16),r.wc(1,"Chamber capacity required"),r.Ob())}function w(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",11),r.Zb("click",function(){return r.oc(e),r.bc().onDelete()}),r.wc(1,"Delete"),r.Ob()}}function L(e,t){if(1&e&&(r.Pb(0,"div",17),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.getFormValidationErrors()," ")}}let k=(()=>{class e{constructor(e){this.fb=e,this.create=new r.n,this.update=new r.n,this.delete=new r.n,this.errorMessage="",this.exists=!1,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){e.chamber&&null!=this.chamber&&(this.form.reset(),this.exists=!0,this.form.patchValue(this.chamber))}createForm(){this.form=this.fb.group({name:["",O.p.required],capacity:["",O.p.required]})}submit(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.clear())}getFormValidationErrors(){let e="";return Object.keys(this.form.controls).forEach(t=>{const o=this.form.get(t).errors;null!=o&&Object.keys(o).forEach(o=>{e+=t+" : "+o+"; "})}),e}onDelete(){this.delete.emit(this.chamber._id),this.clear()}clear(){this.exists=!1,this.chamber=null,this.errorMessage="",this.form.reset()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(O.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["chamber-form"]],inputs:{chamber:"chamber"},outputs:{create:"create",update:"update",delete:"delete"},features:[r.wb],decls:23,vars:8,consts:[[1,"form-head"],["class","alert alert-danger",4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],["for","name",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],[1,"col-sm-10"],["type","text","id","name","formControlName","name","placeholder","Chamber Name",1,"form-control","form-control-sm"],["id","nameHelp","class","form-text text-danger",4,"ngIf"],["for","capacity",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","number","id","capacity","formControlName","capacity","placeholder","Chamber capacity",1,"form-control","form-control-sm"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"mouseenter"],["class","text-danger",4,"ngIf"],[1,"alert","alert-danger"],["id","nameHelp",1,"form-text","text-danger"],[1,"text-danger"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1),r.Ob(),r.uc(2,P,2,1,"div",1),r.Pb(3,"form",2),r.Zb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),r.Pb(4,"div",3),r.Pb(5,"label",4),r.wc(6,"Name"),r.Ob(),r.Pb(7,"div",5),r.Lb(8,"input",6),r.uc(9,v,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(10,"div",3),r.Pb(11,"label",8),r.wc(12,"Capacity"),r.Ob(),r.Pb(13,"div",5),r.Lb(14,"input",9),r.uc(15,y,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(16,"div",10),r.Pb(17,"button",11),r.Zb("click",function(){return t.clear()}),r.wc(18,"Clear"),r.Ob(),r.uc(19,w,2,0,"button",12),r.Pb(20,"button",13),r.Zb("mouseenter",function(){return t.mouseoverShifting=!0}),r.wc(21),r.Ob(),r.Ob(),r.uc(22,L,2,1,"div",14),r.Ob()),2&e&&(r.yb(1),r.yc(" ",t.exists?"Update":"New"," Chamber\n"),r.yb(1),r.gc("ngIf",t.errorMessage.length>0),r.yb(1),r.gc("formGroup",t.form),r.yb(6),r.gc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),r.yb(6),r.gc("ngIf",t.form.controls.capacity.errors&&t.form.controls.capacity.touched),r.yb(4),r.gc("ngIf",t.exists),r.yb(2),r.xc(t.exists?"Update":"Save"),r.yb(1),r.gc("ngIf",t.mouseoverShifting))},directives:[a.l,O.r,O.j,O.d,O.a,O.i,O.c,O.m],styles:[""]}),e})();function S(e,t){if(1&e){const e=r.Qb();r.Pb(0,"tr"),r.Pb(1,"th",15),r.wc(2),r.Ob(),r.Pb(3,"td"),r.wc(4),r.Ob(),r.Pb(5,"td"),r.wc(6),r.Ob(),r.Pb(7,"td"),r.Pb(8,"a",16),r.Zb("click",function(){r.oc(e);const o=t.$implicit;return r.bc().onEdit(o._id)}),r.wc(9,"Edit"),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit,o=t.index;r.yb(2),r.xc(o+1),r.yb(2),r.yc(" ",e.name," "),r.yb(2),r.xc(e.capacity)}}let x=(()=>{class e{constructor(e,t){this.chamberService=e,this.util=t,this.sendingData=!1,this.loadingData=!1,this.page=1,this.pageSize=8,this.chamberPage=[],this.chamberList=[],this.errorMessage=""}ngOnInit(){this.getChamberList()}getChamberList(){return g(this,void 0,void 0,function*(){this.chamberService.chambers$.subscribe(e=>{this.chamberList=e,this.refreshChamber(),this.chamberList.sort(this.util.dynamicSortObject("name"))})})}refreshChamber(){this.chamberPage=this.chamberList.map((e,t)=>Object.assign({id:t+1},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}onCreate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:e.name.toLowerCase()});yield this.chamberService.create(t).then(e=>{console.log(e)}).catch(e=>{console.log("error",e)})})}onUpdate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:this.util.string_to_slug(e.name),createdAt:this.chamber.createdAt});yield this.chamberService.update(this.chamber._id,t).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Group Updating ERROR ! "}),this.clear()})}onDelete(e){return g(this,void 0,void 0,function*(){this.sendingData=!0,confirm("Are you sure to delete")&&(yield this.chamberService.delete(e).then(()=>{this.sendingData=!1,this.chamber=null}).catch(e=>{this.sendingData=!1,this.errorMessage="Chamber Deleting ERROR ! "}),this.clear())})}onEdit(e){this.chamber=this.chamberList.find(t=>t._id===e),console.log("onEdit",e)}clear(){this.chamber=null,this.errorMessage="",this.sendingData=!1,this.loadingData=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(f.a),r.Kb(p.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-chamber"]],decls:33,vars:9,consts:[[1,"page-head"],[1,"container"],[1,"row"],[1,"col-md-4","p-md-0","mt-2"],[1,"border","rounded"],[3,"chamber","create","update","delete"],[1,"col-md-8","mt-2"],[1,"table","table-striped","border","table-sm"],["colspan","4",1,"form-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"edit_link",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1," Chamber\n"),r.Ob(),r.Pb(2,"div",1),r.Pb(3,"div",2),r.Pb(4,"div",3),r.Pb(5,"div",4),r.Pb(6,"chamber-form",5),r.Zb("create",function(e){return t.onCreate(e)})("update",function(e){return t.onUpdate(e)})("delete",function(e){return t.onDelete(e)}),r.Ob(),r.Ob(),r.Ob(),r.Pb(7,"div",6),r.Pb(8,"table",7),r.Pb(9,"thead"),r.Pb(10,"tr"),r.Pb(11,"td",8),r.wc(12," Chamber List "),r.Ob(),r.Ob(),r.Pb(13,"tr"),r.Pb(14,"th",9),r.wc(15,"#"),r.Ob(),r.Pb(16,"th",9),r.wc(17,"Name"),r.Ob(),r.Pb(18,"th",9),r.wc(19,"Capacity"),r.Ob(),r.Pb(20,"th",9),r.wc(21,"Action"),r.Ob(),r.Ob(),r.Ob(),r.Pb(22,"tbody"),r.uc(23,S,10,3,"tr",10),r.Ob(),r.Ob(),r.Pb(24,"div",11),r.Pb(25,"ngb-pagination",12),r.Zb("pageChange",function(e){return t.page=e})("pageChange",function(){return t.refreshChamber()}),r.Ob(),r.Pb(26,"select",13),r.Zb("ngModelChange",function(e){return t.pageSize=e})("ngModelChange",function(){return t.refreshChamber()}),r.Pb(27,"option",14),r.wc(28,"4/Page"),r.Ob(),r.Pb(29,"option",14),r.wc(30,"8/Page"),r.Ob(),r.Pb(31,"option",14),r.wc(32,"16/Page"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.yb(6),r.gc("chamber",t.chamber),r.yb(17),r.gc("ngForOf",t.chamberPage),r.yb(2),r.gc("collectionSize",t.chamberList.length)("page",t.page)("pageSize",t.pageSize),r.yb(1),r.gc("ngModel",t.pageSize),r.yb(1),r.gc("ngValue",4),r.yb(2),r.gc("ngValue",8),r.yb(2),r.gc("ngValue",16))},directives:[k,a.k,c.g,O.o,O.i,O.k,O.l,O.q],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:.875rem}"]}),e})();var C=o("oXKd");function D(e,t){if(1&e&&(r.Pb(0,"div",19),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.errorMessage,"\n")}}function F(e,t){if(1&e&&(r.Pb(0,"option",20),r.wc(1),r.Ob()),2&e){const e=t.$implicit;r.gc("ngValue",e),r.yb(1),r.yc(" ",e.name," ")}}function M(e,t){1&e&&(r.Pb(0,"small",21),r.wc(1,"Floor Name Required"),r.Ob())}function j(e,t){1&e&&(r.Pb(0,"small",21),r.wc(1,"Floor capacity required"),r.Ob())}function _(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",17),r.Zb("click",function(){return r.oc(e),r.bc().onDelete()}),r.wc(1,"Delete"),r.Ob()}}function E(e,t){if(1&e&&(r.Pb(0,"div",22),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.getFormValidationErrors()," ")}}let I=(()=>{class e{constructor(e){this.fb=e,this.create=new r.n,this.update=new r.n,this.delete=new r.n,this.clear=new r.n,this.errorMessage="",this.exists=!1,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){if(e.floor&&null!=this.floor){this.form.reset();const e=this.chamberList.find(e=>e._id==this.floor.chamber._id),t=Object.assign(Object.assign({},this.floor),{chamber:e});this.exists=!0,this.form.patchValue(t)}}createForm(){this.form=this.fb.group({chamber:["",O.p.required],name:["",O.p.required],capacity:["",O.p.required]})}submit(){if(this.form.valid){const e=this.form.value,t={_id:e.chamber._id,name:e.chamber.name,slug:e.chamber.slug},o=Object.assign(Object.assign({},this.form.value),{chamber:t});this.exists?this.update.emit(o):this.create.emit(o),this.clean()}}onDelete(){this.delete.emit(this.floor._id),this.clean()}getFormValidationErrors(){let e="";return Object.keys(this.form.controls).forEach(t=>{const o=this.form.get(t).errors;null!=o&&Object.keys(o).forEach(o=>{e+=t+" : "+o+"; "})}),e}clean(){this.exists=!1,this.floor=null,this.errorMessage="",this.form.reset()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(O.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["floor-form"]],inputs:{floor:"floor",chamberList:"chamberList"},outputs:{create:"create",update:"update",delete:"delete",clear:"clear"},features:[r.wb],decls:31,vars:9,consts:[[1,"form-head"],["class","alert alert-danger",4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],["for","chamber",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],[1,"col-sm-10"],["id","chamber","formControlName","chamber",1,"form-control","form-control-sm"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["for","name",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","text","id","name","formControlName","name","placeholder","Floor Name",1,"form-control","form-control-sm"],["id","nameHelp","class","form-text text-danger",4,"ngIf"],["for","capacity",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","number","id","capacity","formControlName","capacity","placeholder","Floor capacity",1,"form-control","form-control-sm"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"mouseenter"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"alert","alert-danger"],[3,"ngValue"],["id","nameHelp",1,"form-text","text-danger"],[1,"text-danger"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1),r.Ob(),r.uc(2,D,2,1,"div",1),r.Pb(3,"form",2),r.Zb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),r.Pb(4,"div",3),r.Pb(5,"label",4),r.wc(6,"Floor"),r.Ob(),r.Pb(7,"div",5),r.Pb(8,"select",6),r.Pb(9,"option",7),r.wc(10,"Select a chamber"),r.Ob(),r.uc(11,F,2,2,"option",8),r.Ob(),r.Ob(),r.Ob(),r.Pb(12,"div",3),r.Pb(13,"label",9),r.wc(14,"Name"),r.Ob(),r.Pb(15,"div",5),r.Lb(16,"input",10),r.uc(17,M,2,0,"small",11),r.Ob(),r.Ob(),r.Pb(18,"div",3),r.Pb(19,"label",12),r.wc(20,"Capacity"),r.Ob(),r.Pb(21,"div",5),r.Lb(22,"input",13),r.uc(23,j,2,0,"small",11),r.Ob(),r.Ob(),r.Pb(24,"div",14),r.Pb(25,"button",15),r.Zb("mouseenter",function(){return t.mouseoverShifting=!0}),r.wc(26),r.Ob(),r.uc(27,_,2,0,"button",16),r.Pb(28,"button",17),r.Zb("click",function(){return t.clean()}),r.wc(29,"Clear"),r.Ob(),r.Ob(),r.uc(30,E,2,1,"div",18),r.Ob()),2&e&&(r.yb(1),r.yc(" ",t.exists?"Update":"New"," Floor\n"),r.yb(1),r.gc("ngIf",t.errorMessage.length>0),r.yb(1),r.gc("formGroup",t.form),r.yb(8),r.gc("ngForOf",t.chamberList),r.yb(6),r.gc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),r.yb(6),r.gc("ngIf",t.form.controls.capacity.errors&&t.form.controls.capacity.touched),r.yb(3),r.xc(t.exists?"Update":"Save"),r.yb(1),r.gc("ngIf",t.exists),r.yb(3),r.gc("ngIf",t.mouseoverShifting))},directives:[a.l,O.r,O.j,O.d,O.o,O.i,O.c,O.l,O.q,a.k,O.a,O.m],styles:[""]}),e})();function z(e,t){if(1&e){const e=r.Qb();r.Pb(0,"tr"),r.Pb(1,"th",15),r.wc(2),r.Ob(),r.Pb(3,"td"),r.wc(4),r.Ob(),r.Pb(5,"td"),r.wc(6),r.Ob(),r.Pb(7,"td"),r.wc(8),r.Ob(),r.Pb(9,"td"),r.Pb(10,"a",16),r.Zb("click",function(){r.oc(e);const o=t.$implicit;return r.bc().onEdit(o._id)}),r.wc(11,"Edit"),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit,o=t.index;r.yb(2),r.xc(o+1),r.yb(2),r.xc(e.chamber.name),r.yb(2),r.yc("",e.name," "),r.yb(2),r.xc(e.capacity)}}let R=(()=>{class e{constructor(e,t,o){this.floorService=e,this.chamberService=t,this.util=o,this.sendingData=!1,this.loadingData=!1,this.chamberList=[],this.floorList=[],this.page=1,this.pageSize=8,this.floorPage=[],this.errorMessage=""}ngOnInit(){this.getChamberList(),this.getFloorList()}getChamberList(){return g(this,void 0,void 0,function*(){this.chamberService.chambers$.subscribe(e=>{this.chamberList=e,this.chamberList.sort(this.util.dynamicSortObject("name"))})})}getFloorList(){return g(this,void 0,void 0,function*(){this.floorService.floors$.subscribe(e=>{this.floorList=e,this.floorList.sort(this.util.dynamicSortObject("chamber.name")),this.refreshFloor()})})}refreshFloor(){this.floorPage=this.floorList.map((e,t)=>Object.assign({id:t+1},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}onCreate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:this.util.string_to_slug(e.name)});yield this.floorService.create(t).then(e=>{console.log(e)}).catch(e=>{console.log("error",e)})})}onUpdate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:e.name.toLowerCase(),createdAt:this.floor.createdAt});yield this.floorService.update(this.floor._id,t).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Group Updating ERROR ! "}),this.clear()})}onDelete(e){return g(this,void 0,void 0,function*(){this.sendingData=!0,confirm("Are you sure to delete")&&(yield this.floorService.delete(e).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Floor Deleting ERROR ! "}),this.clear())})}onEdit(e){this.floor=this.floorList.find(t=>t._id===e)}clear(){this.floor=null,this.errorMessage="",this.sendingData=!1,this.loadingData=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(C.a),r.Kb(f.a),r.Kb(p.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-floor"]],decls:35,vars:10,consts:[[1,"page-head"],[1,"container"],[1,"row"],[1,"col-md-4","p-md-0","mt-2"],[1,"border","rounded"],[3,"floor","chamberList","create","update","delete"],[1,"col-md-8","mt-2"],[1,"table","table-striped","border","table-sm"],["colspan","5",1,"form-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"edit_link",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1," Floor\n"),r.Ob(),r.Pb(2,"div",1),r.Pb(3,"div",2),r.Pb(4,"div",3),r.Pb(5,"div",4),r.Pb(6,"floor-form",5),r.Zb("create",function(e){return t.onCreate(e)})("update",function(e){return t.onUpdate(e)})("delete",function(e){return t.onDelete(e)}),r.Ob(),r.Ob(),r.Ob(),r.Pb(7,"div",6),r.Pb(8,"table",7),r.Pb(9,"thead"),r.Pb(10,"tr"),r.Pb(11,"td",8),r.wc(12," Floor List "),r.Ob(),r.Ob(),r.Pb(13,"tr"),r.Pb(14,"th",9),r.wc(15,"#"),r.Ob(),r.Pb(16,"th",9),r.wc(17,"Chamber"),r.Ob(),r.Pb(18,"th",9),r.wc(19,"Name"),r.Ob(),r.Pb(20,"th",9),r.wc(21,"Capacity"),r.Ob(),r.Pb(22,"th",9),r.wc(23,"Action"),r.Ob(),r.Ob(),r.Ob(),r.Pb(24,"tbody"),r.uc(25,z,12,4,"tr",10),r.Ob(),r.Ob(),r.Pb(26,"div",11),r.Pb(27,"ngb-pagination",12),r.Zb("pageChange",function(e){return t.page=e})("pageChange",function(){return t.refreshFloor()}),r.Ob(),r.Pb(28,"select",13),r.Zb("ngModelChange",function(e){return t.pageSize=e})("ngModelChange",function(){return t.refreshFloor()}),r.Pb(29,"option",14),r.wc(30,"4/Page"),r.Ob(),r.Pb(31,"option",14),r.wc(32,"8/Page"),r.Ob(),r.Pb(33,"option",14),r.wc(34,"16/Page"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.yb(6),r.gc("floor",t.floor)("chamberList",t.chamberList),r.yb(19),r.gc("ngForOf",t.floorPage),r.yb(2),r.gc("collectionSize",t.floorList.length)("page",t.page)("pageSize",t.pageSize),r.yb(1),r.gc("ngModel",t.pageSize),r.yb(1),r.gc("ngValue",4),r.yb(2),r.gc("ngValue",8),r.yb(2),r.gc("ngValue",16))},directives:[I,a.k,c.g,O.o,O.i,O.k,O.l,O.q],styles:[""]}),e})();var N=o("RoWp");function V(e,t){if(1&e&&(r.Pb(0,"div",22),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.errorMessage,"\n")}}function Z(e,t){if(1&e&&(r.Pb(0,"option",23),r.cc(1,"json"),r.wc(2),r.Ob()),2&e){const e=t.$implicit;r.gc("value",r.dc(1,2,e)),r.yb(2),r.yc(" ",e.name," ")}}function q(e,t){if(1&e&&(r.Pb(0,"option",24),r.wc(1),r.Ob()),2&e){const e=t.$implicit;r.gc("ngValue",e),r.yb(1),r.yc(" ",e.name," ")}}function A(e,t){1&e&&(r.Pb(0,"small",25),r.wc(1,"Line Name Required"),r.Ob())}function U(e,t){1&e&&(r.Pb(0,"small",25),r.wc(1,"Line capacity required"),r.Ob())}function $(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",20),r.Zb("click",function(){return r.oc(e),r.bc().onDelete()}),r.wc(1,"Delete"),r.Ob()}}function K(e,t){if(1&e&&(r.Pb(0,"div",26),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.getFormValidationErrors()," ")}}let G=(()=>{class e{constructor(e){this.fb=e,this.create=new r.n,this.update=new r.n,this.delete=new r.n,this.clear=new r.n,this.selectChamber=new r.n,this.errorMessage="",this.showForm=!1,this.exists=!1,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){if(e.line&&null!=this.line){this.form.reset();const e=this.chamberList.find(e=>e._id==this.line.chamber._id);this.form.patchValue({chamber:e}),this.selectChamber.emit(e._id)}if(e.floorList&&this.line&&null!=this.line._id){const e=this.floorList.find(e=>e._id==this.line.floor._id),t=Object.assign(Object.assign({},this.line),{floor:e});delete t.chamber,this.exists=!0,this.showForm=!0,this.form.patchValue(t)}}createForm(){this.form=this.fb.group({chamber:["",O.p.required],floor:["",O.p.required],name:["",O.p.required],capacity:["",O.p.required]})}onChamberChange(e){const t=JSON.parse(e.target.value);this.form.controls.chamber.setValue(t),this.selectChamber.emit(t._id)}onSelectFlorr(e){e.value._id&&(this.showForm=!0)}submit(){if(this.form.valid){const e=this.form.value;console.log(e);const t={_id:e.chamber._id,name:e.chamber.name,slug:e.chamber.slug},o={_id:e.floor._id,name:e.floor.name,slug:e.floor.slug},i=Object.assign(Object.assign({},this.form.value),{chamber:t,floor:o});this.exists?this.update.emit(i):this.create.emit(i),this.clean()}}onDelete(){this.delete.emit(this.line._id),this.clean()}getFormValidationErrors(){let e="";return Object.keys(this.form.controls).forEach(t=>{const o=this.form.get(t).errors;null!=o&&Object.keys(o).forEach(o=>{e+=t+" : "+o+"; "})}),e}clean(){this.exists=!1,this.showForm=!1,this.floorList=null,this.line=null,this.errorMessage="",this.form.reset()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(O.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["line-form"]],inputs:{line:"line",floorList:"floorList",chamberList:"chamberList"},outputs:{create:"create",update:"update",delete:"delete",clear:"clear",selectChamber:"selectChamber"},features:[r.wb],decls:39,vars:10,consts:[[1,"form-head"],["class","alert alert-danger",4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],["for","chamber",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],[1,"col-sm-10"],["id","chamber",1,"form-control","form-control-sm",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","floor",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["id","floor","formControlName","floor",1,"form-control","form-control-sm"],[3,"ngValue",4,"ngFor","ngForOf"],["for","name",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","text","id","name","formControlName","name","placeholder","Line Name",1,"form-control","form-control-sm"],["id","nameHelp","class","form-text text-danger",4,"ngIf"],["for","capacity",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","number","id","capacity","formControlName","capacity","placeholder","Line capacity",1,"form-control","form-control-sm"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"mouseenter"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],[3,"ngValue"],["id","nameHelp",1,"form-text","text-danger"],[1,"text-danger"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1),r.Ob(),r.uc(2,V,2,1,"div",1),r.Pb(3,"form",2),r.Zb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),r.Pb(4,"div",3),r.Pb(5,"label",4),r.wc(6,"Chamber"),r.Ob(),r.Pb(7,"div",5),r.Pb(8,"select",6),r.Zb("change",function(e){return t.onChamberChange(e)}),r.Pb(9,"option",7),r.wc(10,"Select a chamber"),r.Ob(),r.uc(11,Z,3,4,"option",8),r.Ob(),r.Ob(),r.Ob(),r.Pb(12,"div",3),r.Pb(13,"label",9),r.wc(14,"Floor"),r.Ob(),r.Pb(15,"div",5),r.Pb(16,"select",10),r.Pb(17,"option",7),r.wc(18,"Select a floor"),r.Ob(),r.uc(19,q,2,2,"option",11),r.Ob(),r.Ob(),r.Ob(),r.Pb(20,"div",3),r.Pb(21,"label",12),r.wc(22,"Name"),r.Ob(),r.Pb(23,"div",5),r.Lb(24,"input",13),r.uc(25,A,2,0,"small",14),r.Ob(),r.Ob(),r.Pb(26,"div",3),r.Pb(27,"label",15),r.wc(28,"Capacity"),r.Ob(),r.Pb(29,"div",5),r.Lb(30,"input",16),r.uc(31,U,2,0,"small",14),r.Ob(),r.Ob(),r.Pb(32,"div",17),r.Pb(33,"button",18),r.Zb("mouseenter",function(){return t.mouseoverShifting=!0}),r.wc(34),r.Ob(),r.uc(35,$,2,0,"button",19),r.Pb(36,"button",20),r.Zb("click",function(){return t.clean()}),r.wc(37,"Clear"),r.Ob(),r.Ob(),r.uc(38,K,2,1,"div",21),r.Ob()),2&e&&(r.yb(1),r.yc(" ",t.exists?"Update":"New"," Line\n"),r.yb(1),r.gc("ngIf",t.errorMessage.length>0),r.yb(1),r.gc("formGroup",t.form),r.yb(8),r.gc("ngForOf",t.chamberList),r.yb(8),r.gc("ngForOf",t.floorList),r.yb(6),r.gc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),r.yb(6),r.gc("ngIf",t.form.controls.capacity.errors&&t.form.controls.capacity.touched),r.yb(3),r.xc(t.exists?"Update":"Save"),r.yb(1),r.gc("ngIf",t.exists),r.yb(3),r.gc("ngIf",t.mouseoverShifting))},directives:[a.l,O.r,O.j,O.d,O.l,O.q,a.k,O.o,O.i,O.c,O.a,O.m],pipes:[a.f],styles:[""],changeDetection:0}),e})();function Q(e,t){if(1&e){const e=r.Qb();r.Pb(0,"tr"),r.Pb(1,"th",15),r.wc(2),r.Ob(),r.Pb(3,"td"),r.wc(4),r.Ob(),r.Pb(5,"td"),r.wc(6),r.Ob(),r.Pb(7,"td"),r.wc(8),r.Ob(),r.Pb(9,"td"),r.wc(10),r.Ob(),r.Pb(11,"td"),r.Pb(12,"a",16),r.Zb("click",function(){r.oc(e);const o=t.$implicit;return r.bc().onEdit(o._id)}),r.wc(13,"Edit"),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit,o=t.index;r.yb(2),r.xc(o+1),r.yb(2),r.xc(e.chamber.name),r.yb(2),r.xc(e.floor.name),r.yb(2),r.yc("",e.name," "),r.yb(2),r.xc(e.capacity)}}let H=(()=>{class e{constructor(e,t,o,i,n){this.chamberService=e,this.floorService=t,this.lineService=o,this.util=i,this.cdr=n,this.sendingData=!1,this.loadingData=!1,this.page=1,this.pageSize=8,this.linePage=[],this.errorMessage=""}ngOnInit(){this.getChamberList(),this.getLineList()}ngAfterContentChecked(){this.cdr.detectChanges()}getChamberList(){return g(this,void 0,void 0,function*(){this.chamberService.chambers$.subscribe(e=>{this.chamberList=e,this.chamberList.sort(this.util.dynamicSortObject("priority"))})})}getFloorList(e){return g(this,void 0,void 0,function*(){this.floorService.floors$.subscribe(t=>{this.floorList=t.filter(t=>t.chamber._id==e),this.floorList.sort(this.util.dynamicSortObject("priority"))})})}getLineList(){return g(this,void 0,void 0,function*(){this.lineService.lines$.subscribe(e=>{this.lineList=e,this.lineList.sort(this.util.dynamicSortObject("priority")),this.refreshLine()})})}refreshLine(){this.linePage=this.lineList.map((e,t)=>Object.assign({id:t+1},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}onCreate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:this.util.string_to_slug(e.name)});yield this.lineService.create(t).then(e=>{console.log(e)}).catch(e=>{console.log("error",e)})})}onUpdate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:e.name.toLowerCase(),createdAt:this.line.createdAt});yield this.lineService.update(this.line._id,t).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Group Updating ERROR ! "}),this.clear()})}onDelete(e){return g(this,void 0,void 0,function*(){this.sendingData=!0,confirm("Are you sure to delete")&&(yield this.lineService.delete(e).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Line Deleting ERROR ! "}),this.clear())})}onEdit(e){this.line=this.lineList.find(t=>t._id===e)}clear(){this.line=null,this.errorMessage="",this.sendingData=!1,this.loadingData=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(f.a),r.Kb(C.a),r.Kb(N.a),r.Kb(p.a),r.Kb(r.h))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-line"]],decls:37,vars:11,consts:[[1,"page-head"],[1,"container"],[1,"row"],[1,"col-md-4","p-md-0","mt-2"],[1,"border","rounded"],[3,"line","chamberList","floorList","create","update","delete","selectChamber"],[1,"col-md-8","mt-2"],[1,"table","table-striped","border","table-sm"],["colspan","6",1,"form-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"edit_link",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1," Line\n"),r.Ob(),r.Pb(2,"div",1),r.Pb(3,"div",2),r.Pb(4,"div",3),r.Pb(5,"div",4),r.Pb(6,"line-form",5),r.Zb("create",function(e){return t.onCreate(e)})("update",function(e){return t.onUpdate(e)})("delete",function(e){return t.onDelete(e)})("selectChamber",function(e){return t.getFloorList(e)}),r.Ob(),r.Ob(),r.Ob(),r.Pb(7,"div",6),r.Pb(8,"table",7),r.Pb(9,"thead"),r.Pb(10,"tr"),r.Pb(11,"td",8),r.wc(12," Line List "),r.Ob(),r.Ob(),r.Pb(13,"tr"),r.Pb(14,"th",9),r.wc(15,"#"),r.Ob(),r.Pb(16,"th",9),r.wc(17,"Chamber"),r.Ob(),r.Pb(18,"th",9),r.wc(19,"Floor"),r.Ob(),r.Pb(20,"th",9),r.wc(21,"Name"),r.Ob(),r.Pb(22,"th",9),r.wc(23,"Capacity"),r.Ob(),r.Pb(24,"th",9),r.wc(25,"Action"),r.Ob(),r.Ob(),r.Ob(),r.Pb(26,"tbody"),r.uc(27,Q,14,5,"tr",10),r.Ob(),r.Ob(),r.Pb(28,"div",11),r.Pb(29,"ngb-pagination",12),r.Zb("pageChange",function(e){return t.page=e})("pageChange",function(){return t.refreshLine()}),r.Ob(),r.Pb(30,"select",13),r.Zb("ngModelChange",function(e){return t.pageSize=e})("ngModelChange",function(){return t.refreshLine()}),r.Pb(31,"option",14),r.wc(32,"4/Page"),r.Ob(),r.Pb(33,"option",14),r.wc(34,"8/Page"),r.Ob(),r.Pb(35,"option",14),r.wc(36,"16/Page"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.yb(6),r.gc("line",t.line)("chamberList",t.chamberList)("floorList",t.floorList),r.yb(21),r.gc("ngForOf",t.linePage),r.yb(2),r.gc("collectionSize",t.lineList.length)("page",t.page)("pageSize",t.pageSize),r.yb(1),r.gc("ngModel",t.pageSize),r.yb(1),r.gc("ngValue",4),r.yb(2),r.gc("ngValue",8),r.yb(2),r.gc("ngValue",16))},directives:[G,a.k,c.g,O.o,O.i,O.k,O.l,O.q],styles:[""]}),e})();var J=o("SJrw");function T(e,t){if(1&e&&(r.Pb(0,"div",24),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.errorMessage,"\n")}}function X(e,t){if(1&e&&(r.Pb(0,"option",25),r.cc(1,"json"),r.wc(2),r.Ob()),2&e){const e=t.$implicit;r.gc("value",r.dc(1,2,e)),r.yb(2),r.yc(" ",e.name," ")}}function W(e,t){if(1&e&&(r.Pb(0,"option",25),r.cc(1,"json"),r.wc(2),r.Ob()),2&e){const e=t.$implicit;r.gc("value",r.dc(1,2,e)),r.yb(2),r.yc(" ",e.name," ")}}function B(e,t){if(1&e&&(r.Pb(0,"option",26),r.wc(1),r.Ob()),2&e){const e=t.$implicit;r.gc("ngValue",e),r.yb(1),r.yc(" ",e.name," ")}}function Y(e,t){1&e&&(r.Pb(0,"small",27),r.wc(1,"Pocket Name Required"),r.Ob())}function ee(e,t){1&e&&(r.Pb(0,"small",27),r.wc(1,"Pocket capacity required"),r.Ob())}function te(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",22),r.Zb("click",function(){return r.oc(e),r.bc().onDelete()}),r.wc(1,"Delete"),r.Ob()}}function oe(e,t){if(1&e&&(r.Pb(0,"div",28),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.getFormValidationErrors()," ")}}let ie=(()=>{class e{constructor(e){this.fb=e,this.create=new r.n,this.update=new r.n,this.delete=new r.n,this.clear=new r.n,this.selectChamber=new r.n,this.selectFloor=new r.n,this.errorMessage="",this.showForm=!1,this.exists=!1,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){if(e.pocket&&null!=this.pocket){this.form.reset();const e=this.chamberList.find(e=>e._id==this.pocket.chamber._id);this.form.patchValue({chamber:e}),this.selectChamber.emit(e._id)}if(e.floorList&&this.pocket&&null!=this.pocket._id){const e=this.floorList.find(e=>e._id==this.pocket.floor._id);this.form.patchValue({floor:e}),this.selectFloor.emit(e._id)}if(e.lineList&&this.pocket&&null!=this.pocket._id){const e=this.lineList.find(e=>e._id==this.pocket.line._id),t=Object.assign(Object.assign({},this.pocket),{line:e});delete t.chamber,delete t.floor,this.exists=!0,this.showForm=!0,this.form.patchValue(t)}}createForm(){this.form=this.fb.group({chamber:["",O.p.required],floor:["",O.p.required],line:["",O.p.required],name:["",O.p.required],capacity:["",O.p.required]})}onChamberChange(e){const t=JSON.parse(e.target.value);this.form.controls.chamber.setValue(t),this.selectChamber.emit(t._id)}onFloorChange(e){const t=JSON.parse(e.target.value);this.form.controls.floor.setValue(t),console.log(t),this.selectFloor.emit(t._id)}onSelectLine(e){e.value._id&&(this.showForm=!0)}submit(){if(this.form.valid){const e=this.form.value,t={_id:e.chamber._id,name:e.chamber.name,slug:e.chamber.slug},o={_id:e.floor._id,name:e.floor.name,slug:e.floor.slug},i=Object.assign(Object.assign({},this.form.value),{chamber:t,floor:o});this.exists?this.update.emit(i):this.create.emit(i),this.clean()}}onDelete(){this.delete.emit(this.pocket._id),this.clean()}getFormValidationErrors(){let e="";return Object.keys(this.form.controls).forEach(t=>{const o=this.form.get(t).errors;null!=o&&Object.keys(o).forEach(o=>{e+=t+" : "+o+"; "})}),e}clean(){this.exists=!1,this.showForm=!1,this.floorList=null,this.lineList=null,this.pocket=null,this.errorMessage="",this.form.reset()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(O.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["pocket-form"]],inputs:{pocket:"pocket",lineList:"lineList",floorList:"floorList",chamberList:"chamberList"},outputs:{create:"create",update:"update",delete:"delete",clear:"clear",selectChamber:"selectChamber",selectFloor:"selectFloor"},features:[r.wb],decls:47,vars:11,consts:[[1,"form-head"],["class","alert alert-danger",4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],["for","chamber",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],[1,"col-sm-10"],["id","chamber",1,"form-control","form-control-sm",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","floor",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["id","floor",1,"form-control","form-control-sm",3,"change"],["for","line",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["id","floor","formControlName","line",1,"form-control","form-control-sm"],[3,"ngValue",4,"ngFor","ngForOf"],["for","name",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","text","id","name","formControlName","name","placeholder","Pocket Name",1,"form-control","form-control-sm"],["id","nameHelp","class","form-text text-danger",4,"ngIf"],["for","capacity",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","number","id","capacity","formControlName","capacity","placeholder","Pocket capacity",1,"form-control","form-control-sm"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"mouseenter"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],[3,"ngValue"],["id","nameHelp",1,"form-text","text-danger"],[1,"text-danger"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1),r.Ob(),r.uc(2,T,2,1,"div",1),r.Pb(3,"form",2),r.Zb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),r.Pb(4,"div",3),r.Pb(5,"label",4),r.wc(6,"Chamber"),r.Ob(),r.Pb(7,"div",5),r.Pb(8,"select",6),r.Zb("change",function(e){return t.onChamberChange(e)}),r.Pb(9,"option",7),r.wc(10,"Select a chamber"),r.Ob(),r.uc(11,X,3,4,"option",8),r.Ob(),r.Ob(),r.Ob(),r.Pb(12,"div",3),r.Pb(13,"label",9),r.wc(14,"Floor"),r.Ob(),r.Pb(15,"div",5),r.Pb(16,"select",10),r.Zb("change",function(e){return t.onFloorChange(e)}),r.Pb(17,"option",7),r.wc(18,"Select a floor"),r.Ob(),r.uc(19,W,3,4,"option",8),r.Ob(),r.Ob(),r.Ob(),r.Pb(20,"div",3),r.Pb(21,"label",11),r.wc(22,"Line"),r.Ob(),r.Pb(23,"div",5),r.Pb(24,"select",12),r.Pb(25,"option",7),r.wc(26,"Select a line"),r.Ob(),r.uc(27,B,2,2,"option",13),r.Ob(),r.Ob(),r.Ob(),r.Pb(28,"div",3),r.Pb(29,"label",14),r.wc(30,"Name"),r.Ob(),r.Pb(31,"div",5),r.Lb(32,"input",15),r.uc(33,Y,2,0,"small",16),r.Ob(),r.Ob(),r.Pb(34,"div",3),r.Pb(35,"label",17),r.wc(36,"Capacity"),r.Ob(),r.Pb(37,"div",5),r.Lb(38,"input",18),r.uc(39,ee,2,0,"small",16),r.Ob(),r.Ob(),r.Pb(40,"div",19),r.Pb(41,"button",20),r.Zb("mouseenter",function(){return t.mouseoverShifting=!0}),r.wc(42),r.Ob(),r.uc(43,te,2,0,"button",21),r.Pb(44,"button",22),r.Zb("click",function(){return t.clean()}),r.wc(45,"Clear"),r.Ob(),r.Ob(),r.uc(46,oe,2,1,"div",23),r.Ob()),2&e&&(r.yb(1),r.yc(" ",t.exists?"Update":"New"," Pocket\n"),r.yb(1),r.gc("ngIf",t.errorMessage.length>0),r.yb(1),r.gc("formGroup",t.form),r.yb(8),r.gc("ngForOf",t.chamberList),r.yb(8),r.gc("ngForOf",t.floorList),r.yb(8),r.gc("ngForOf",t.lineList),r.yb(6),r.gc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),r.yb(6),r.gc("ngIf",t.form.controls.capacity.errors&&t.form.controls.capacity.touched),r.yb(3),r.xc(t.exists?"Update":"Save"),r.yb(1),r.gc("ngIf",t.exists),r.yb(3),r.gc("ngIf",t.mouseoverShifting))},directives:[a.l,O.r,O.j,O.d,O.l,O.q,a.k,O.o,O.i,O.c,O.a,O.m],pipes:[a.f],styles:[""]}),e})();function ne(e,t){if(1&e){const e=r.Qb();r.Pb(0,"tr"),r.Pb(1,"th",15),r.wc(2),r.Ob(),r.Pb(3,"td"),r.wc(4),r.Ob(),r.Pb(5,"td"),r.wc(6),r.Ob(),r.Pb(7,"td"),r.wc(8),r.Ob(),r.Pb(9,"td"),r.wc(10),r.Ob(),r.Pb(11,"td"),r.wc(12),r.Ob(),r.Pb(13,"td"),r.Pb(14,"a",16),r.Zb("click",function(){r.oc(e);const o=t.$implicit;return r.bc().onEdit(o._id)}),r.wc(15,"Edit"),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit,o=t.index;r.yb(2),r.xc(o+1),r.yb(2),r.xc(e.chamber.name),r.yb(2),r.xc(e.floor.name),r.yb(2),r.xc(e.line.name),r.yb(2),r.yc("",e.name," "),r.yb(2),r.xc(e.capacity)}}let re=(()=>{class e{constructor(e,t,o,i,n,r){this.chamberService=e,this.floorService=t,this.lineService=o,this.pocketService=i,this.util=n,this.cdr=r,this.sendingData=!1,this.loadingData=!1,this.page=1,this.pageSize=8,this.pocketPage=[],this.errorMessage=""}ngOnInit(){this.getChamberList(),this.getPocketList()}ngAfterContentChecked(){this.cdr.detectChanges()}ngAfterViewChecked(){this.cdr.detectChanges()}getChamberList(){return g(this,void 0,void 0,function*(){this.chamberService.chambers$.subscribe(e=>{this.chamberList=e,this.chamberList.sort(this.util.dynamicSortObject("priority"))})})}getFloorList(e){return g(this,void 0,void 0,function*(){this.floorService.floors$.subscribe(t=>{this.floorList=t.filter(t=>t.chamber._id==e),this.floorList.sort(this.util.dynamicSortObject("priority"))})})}getLineList(e){return g(this,void 0,void 0,function*(){console.log(e),this.lineService.lines$.subscribe(t=>{this.lineList=t.filter(t=>t.floor._id==e),console.log(this.lineList),this.lineList.sort(this.util.dynamicSortObject("priority"))})})}getPocketList(){return g(this,void 0,void 0,function*(){this.pocketService.pockets$.subscribe(e=>{this.pocketList=e,this.pocketList.sort(this.util.dynamicSortObject("priority")),this.refreshPocket()})})}refreshPocket(){this.pocketPage=this.pocketList.map((e,t)=>Object.assign({id:t+1},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}onCreate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:this.util.string_to_slug(e.name)});console.log(t),yield this.pocketService.create(t).then(e=>{console.log(e)}).catch(e=>{console.log("error",e)})})}onUpdate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:e.name.toLowerCase(),createdAt:this.pocket.createdAt});yield this.pocketService.update(this.pocket._id,t).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Group Updating ERROR ! "}),this.clear()})}onDelete(e){return g(this,void 0,void 0,function*(){this.sendingData=!0,confirm("Are you sure to delete")&&(yield this.pocketService.delete(e).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Line Deleting ERROR ! "}),this.clear())})}onEdit(e){this.pocket=this.pocketList.find(t=>t._id===e)}clear(){this.pocket=null,this.errorMessage="",this.sendingData=!1,this.loadingData=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(f.a),r.Kb(C.a),r.Kb(N.a),r.Kb(J.a),r.Kb(p.a),r.Kb(r.h))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-pocket"]],decls:39,vars:12,consts:[[1,"page-head"],[1,"container"],[1,"row"],[1,"col-md-4","p-md-0","mt-2"],[1,"border","rounded"],[3,"pocket","chamberList","floorList","lineList","create","update","delete","selectChamber","selectFloor"],[1,"col-md-8","mt-2"],[1,"table","table-striped","border","table-sm"],["colspan","7",1,"form-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"edit_link",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1," Pocket\n"),r.Ob(),r.Pb(2,"div",1),r.Pb(3,"div",2),r.Pb(4,"div",3),r.Pb(5,"div",4),r.Pb(6,"pocket-form",5),r.Zb("create",function(e){return t.onCreate(e)})("update",function(e){return t.onUpdate(e)})("delete",function(e){return t.onDelete(e)})("selectChamber",function(e){return t.getFloorList(e)})("selectFloor",function(e){return t.getLineList(e)}),r.Ob(),r.Ob(),r.Ob(),r.Pb(7,"div",6),r.Pb(8,"table",7),r.Pb(9,"thead"),r.Pb(10,"tr"),r.Pb(11,"td",8),r.wc(12," Pocket List "),r.Ob(),r.Ob(),r.Pb(13,"tr"),r.Pb(14,"th",9),r.wc(15,"#"),r.Ob(),r.Pb(16,"th",9),r.wc(17,"Chamber"),r.Ob(),r.Pb(18,"th",9),r.wc(19,"Floor"),r.Ob(),r.Pb(20,"th",9),r.wc(21,"Line"),r.Ob(),r.Pb(22,"th",9),r.wc(23,"Name"),r.Ob(),r.Pb(24,"th",9),r.wc(25,"Capacity"),r.Ob(),r.Pb(26,"th",9),r.wc(27,"Action"),r.Ob(),r.Ob(),r.Ob(),r.Pb(28,"tbody"),r.uc(29,ne,16,6,"tr",10),r.Ob(),r.Ob(),r.Pb(30,"div",11),r.Pb(31,"ngb-pagination",12),r.Zb("pageChange",function(e){return t.page=e})("pageChange",function(){return t.refreshPocket()}),r.Ob(),r.Pb(32,"select",13),r.Zb("ngModelChange",function(e){return t.pageSize=e})("ngModelChange",function(){return t.refreshPocket()}),r.Pb(33,"option",14),r.wc(34,"4/Page"),r.Ob(),r.Pb(35,"option",14),r.wc(36,"8/Page"),r.Ob(),r.Pb(37,"option",14),r.wc(38,"16/Page"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.yb(6),r.gc("pocket",t.pocket)("chamberList",t.chamberList)("floorList",t.floorList)("lineList",t.lineList),r.yb(23),r.gc("ngForOf",t.pocketPage),r.yb(2),r.gc("collectionSize",t.pocketList.length)("page",t.page)("pageSize",t.pageSize),r.yb(1),r.gc("ngModel",t.pageSize),r.yb(1),r.gc("ngValue",4),r.yb(2),r.gc("ngValue",8),r.yb(2),r.gc("ngValue",16))},directives:[ie,a.k,c.g,O.o,O.i,O.k,O.l,O.q],styles:[""]}),e})();var se=o("2kyN");function ce(e,t){if(1&e&&(r.Pb(0,"div",13),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.errorMessage,"\n")}}function ae(e,t){1&e&&(r.Pb(0,"small",14),r.wc(1,"Role Name Required"),r.Ob())}function le(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",11),r.Zb("click",function(){return r.oc(e),r.bc().onDelete()}),r.wc(1,"Delete"),r.Ob()}}function be(e,t){if(1&e&&(r.Pb(0,"div",15),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.getFormValidationErrors()," ")}}let de=(()=>{class e{constructor(e){this.fb=e,this.create=new r.n,this.update=new r.n,this.delete=new r.n,this.errorMessage="",this.exists=!1,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){e.role&&null!=this.role&&(this.form.reset(),this.exists=!0,this.form.patchValue(this.role))}createForm(){this.form=this.fb.group({name:["",O.p.required]})}submit(){if(this.form.valid){if(this.exists){const e=Object.assign(Object.assign({},this.role),this.form.value);this.update.emit(e)}else this.create.emit(this.form.value);this.clear()}}getFormValidationErrors(){let e="";return Object.keys(this.form.controls).forEach(t=>{const o=this.form.get(t).errors;null!=o&&Object.keys(o).forEach(o=>{e+=t+" : "+o+"; "})}),e}onDelete(){this.delete.emit(this.role._id),this.clear()}clear(){this.exists=!1,this.role=null,this.errorMessage="",this.form.reset()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(O.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["role-form"]],inputs:{role:"role"},outputs:{create:"create",update:"update",delete:"delete"},features:[r.wb],decls:17,vars:7,consts:[[1,"form-head"],["class","alert alert-danger",4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],["for","name",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],[1,"col-sm-10"],["type","text","id","name","formControlName","name","placeholder","Role Name",1,"form-control","form-control-sm"],["id","nameHelp","class","form-text text-danger",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"mouseenter"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"alert","alert-danger"],["id","nameHelp",1,"form-text","text-danger"],[1,"text-danger"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1),r.Ob(),r.uc(2,ce,2,1,"div",1),r.Pb(3,"form",2),r.Zb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),r.Pb(4,"div",3),r.Pb(5,"label",4),r.wc(6,"Name"),r.Ob(),r.Pb(7,"div",5),r.Lb(8,"input",6),r.uc(9,ae,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(10,"div",8),r.Pb(11,"button",9),r.Zb("mouseenter",function(){return t.mouseoverShifting=!0}),r.wc(12),r.Ob(),r.uc(13,le,2,0,"button",10),r.Pb(14,"button",11),r.Zb("click",function(){return t.clear()}),r.wc(15,"Clear"),r.Ob(),r.Ob(),r.uc(16,be,2,1,"div",12),r.Ob()),2&e&&(r.yb(1),r.yc(" ",t.exists?"Update":"New"," Role\n"),r.yb(1),r.gc("ngIf",t.errorMessage.length>0),r.yb(1),r.gc("formGroup",t.form),r.yb(6),r.gc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),r.yb(3),r.xc(t.exists?"Update":"Save"),r.yb(1),r.gc("ngIf",t.exists),r.yb(3),r.gc("ngIf",t.mouseoverShifting))},directives:[a.l,O.r,O.j,O.d,O.a,O.i,O.c],styles:[""]}),e})();function he(e,t){if(1&e){const e=r.Qb();r.Pb(0,"tr"),r.Pb(1,"th",15),r.wc(2),r.Ob(),r.Pb(3,"td"),r.wc(4),r.Ob(),r.Pb(5,"td"),r.Pb(6,"a",16),r.Zb("click",function(){r.oc(e);const o=t.$implicit;return r.bc().onEdit(o._id)}),r.wc(7,"Edit"),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit,o=t.index;r.yb(2),r.xc(o+1),r.yb(2),r.yc(" ",e.name," ")}}let me=(()=>{class e{constructor(e,t){this.roleService=e,this.util=t,this.sendingData=!1,this.loadingData=!1,this.roleList=[],this.page=1,this.pageSize=8,this.rolePage=[],this.errorMessage=""}ngOnInit(){this.getRoleList()}getRoleList(){return g(this,void 0,void 0,function*(){this.roleService.roles$.subscribe(e=>{this.roleList=e,this.roleList.sort(this.util.dynamicSortObject("name")),this.refreshRole()})})}refreshRole(){this.rolePage=this.roleList.map((e,t)=>Object.assign({id:t+1},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}onCreate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:e.name.toLowerCase()});yield this.roleService.create(t).then(e=>{console.log(e)}).catch(e=>{console.log("error",e)})})}onUpdate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:this.util.string_to_slug(e.name),createdAt:this.role.createdAt});yield this.roleService.update(this.role._id,t).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Group Updating ERROR ! "}),this.clear()})}onDelete(e){return g(this,void 0,void 0,function*(){this.sendingData=!0,confirm("Are you sure to delete")&&(yield this.roleService.delete(e).then(()=>{this.sendingData=!1,this.role=null}).catch(e=>{this.sendingData=!1,this.errorMessage="Role Deleting ERROR ! "}),this.clear())})}onEdit(e){this.role=this.roleList.find(t=>t._id===e),console.log("onEdit",e)}clear(){this.role=null,this.errorMessage="",this.sendingData=!1,this.loadingData=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(se.a),r.Kb(p.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-role"]],decls:31,vars:9,consts:[[1,"page-head"],[1,"container"],[1,"row"],[1,"col-md-4","p-md-0","mt-2"],[1,"border","rounded"],[3,"role","create","update","delete"],[1,"col-md-8","mt-2"],[1,"table","table-striped","border","table-sm"],["colspan","4",1,"form-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"edit_link",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1," Role\n"),r.Ob(),r.Pb(2,"div",1),r.Pb(3,"div",2),r.Pb(4,"div",3),r.Pb(5,"div",4),r.Pb(6,"role-form",5),r.Zb("create",function(e){return t.onCreate(e)})("update",function(e){return t.onUpdate(e)})("delete",function(e){return t.onDelete(e)}),r.Ob(),r.Ob(),r.Ob(),r.Pb(7,"div",6),r.Pb(8,"table",7),r.Pb(9,"thead"),r.Pb(10,"tr"),r.Pb(11,"td",8),r.wc(12," Role List "),r.Ob(),r.Ob(),r.Pb(13,"tr"),r.Pb(14,"th",9),r.wc(15,"#"),r.Ob(),r.Pb(16,"th",9),r.wc(17,"Name"),r.Ob(),r.Pb(18,"th",9),r.wc(19,"Action"),r.Ob(),r.Ob(),r.Ob(),r.Pb(20,"tbody"),r.uc(21,he,8,2,"tr",10),r.Ob(),r.Ob(),r.Pb(22,"div",11),r.Pb(23,"ngb-pagination",12),r.Zb("pageChange",function(e){return t.page=e})("pageChange",function(){return t.refreshRole()}),r.Ob(),r.Pb(24,"select",13),r.Zb("ngModelChange",function(e){return t.pageSize=e})("ngModelChange",function(){return t.refreshRole()}),r.Pb(25,"option",14),r.wc(26,"4/Page"),r.Ob(),r.Pb(27,"option",14),r.wc(28,"8/Page"),r.Ob(),r.Pb(29,"option",14),r.wc(30,"16/Page"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.yb(6),r.gc("role",t.role),r.yb(15),r.gc("ngForOf",t.rolePage),r.yb(2),r.gc("collectionSize",t.roleList.length)("page",t.page)("pageSize",t.pageSize),r.yb(1),r.gc("ngModel",t.pageSize),r.yb(1),r.gc("ngValue",4),r.yb(2),r.gc("ngValue",8),r.yb(2),r.gc("ngValue",16))},directives:[de,a.k,c.g,O.o,O.i,O.k,O.l,O.q],styles:[""]}),e})();var ue=o("/7iW"),ge=o("u6mN");function fe(e,t){if(1&e&&(r.Pb(0,"div",29),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.errorMessage,"\n")}}function pe(e,t){1&e&&(r.Pb(0,"small",30),r.wc(1,"User Name Required"),r.Ob())}function Oe(e,t){if(1&e&&(r.Pb(0,"small",31),r.Pb(1,"div",32),r.wc(2," Phone required "),r.Ob(),r.Pb(3,"div",32),r.wc(4," Phone patter should be 01945564841 "),r.Ob(),r.Ob()),2&e){const e=r.bc();r.yb(1),r.gc("hidden",!e.form.controls.phone.errors.required),r.yb(2),r.gc("hidden",!e.form.controls.phone.errors.pattern)}}function Pe(e,t){if(1&e&&(r.Pb(0,"small",31),r.Pb(1,"div",32),r.wc(2," Email required "),r.Ob(),r.Pb(3,"div",32),r.wc(4," Invalid email "),r.Ob(),r.Ob()),2&e){const e=r.bc();r.yb(1),r.gc("hidden",!e.form.controls.email.errors.required),r.yb(2),r.gc("hidden",!e.form.controls.email.errors.email)}}function ve(e,t){1&e&&(r.Pb(0,"small",30),r.wc(1,"User password Required"),r.Ob())}function ye(e,t){if(1&e&&(r.Pb(0,"option",33),r.wc(1),r.Ob()),2&e){const e=t.$implicit;r.gc("ngValue",e),r.yb(1),r.yc(" ",e.name," ")}}function we(e,t){1&e&&(r.Pb(0,"small",30),r.wc(1,"User role required"),r.Ob())}function Le(e,t){1&e&&(r.Pb(0,"small",30),r.wc(1,"User address required"),r.Ob())}function ke(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",28),r.Zb("click",function(){return r.oc(e),r.bc().onDelete()}),r.wc(1,"Delete"),r.Ob()}}function Se(e,t){if(1&e&&(r.Pb(0,"div",31),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.getFormValidationErrors()," ")}}let xe=(()=>{class e{constructor(e){this.fb=e,this.create=new r.n,this.update=new r.n,this.delete=new r.n,this.errorMessage="",this.exists=!1,this.showPassword=!1,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){if(e.user&&null!=this.user){this.form.reset();const e=this.roleList.find(e=>e.name==this.user.role),t=Object.assign(Object.assign({},this.user),{role:e});this.exists=!0,this.form.patchValue(t)}}createForm(){this.form=this.fb.group({name:["",O.p.required],email:["",[O.p.required,O.p.email]],phone:["",[O.p.required,O.p.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],password:["",O.p.required],role:["",O.p.required],address:["",O.p.required]})}submit(){if(this.form.valid){const e=this.form.value.role.name,t=Object.assign(Object.assign({},this.form.value),{role:e});if(this.exists){const e=Object.assign(Object.assign({},this.user),t);this.update.emit(e)}else this.create.emit(t);this.clear()}}getFormValidationErrors(){let e="";return Object.keys(this.form.controls).forEach(t=>{const o=this.form.get(t).errors;null!=o&&Object.keys(o).forEach(o=>{e+=t+" : "+o+"; "})}),e}onDelete(){this.delete.emit(this.user._id),this.clear()}clear(){this.exists=!1,this.user=null,this.errorMessage="",this.form.reset()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(O.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["user-form"]],inputs:{user:"user",roleList:"roleList"},outputs:{create:"create",update:"update",delete:"delete"},features:[r.wb],decls:54,vars:17,consts:[[1,"form-head"],["class","alert alert-danger",4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],["for","name",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],[1,"col-sm-10"],["type","text","id","name","formControlName","name","placeholder","User Name",1,"form-control","form-control-sm"],["class","form-text text-danger",4,"ngIf"],["for","phone",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","text","id","phone","maxlength","11","formControlName","phone","placeholder","User phone",1,"form-control","form-control-sm"],["class","text-danger",4,"ngIf"],["for","email",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","text","id","email","formControlName","email","placeholder","User email",1,"form-control","form-control-sm",3,"readonly"],["for","password",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],[1,"input-group","mb-2"],["id","password","formControlName","password","placeholder","Password",1,"form-control",3,"type","readonly"],[1,"input-group-append"],[1,"input-group-text",2,"cursor","pointer",3,"click"],[1,"fa",3,"ngClass"],["for","role",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["id","role","formControlName","role",1,"form-control","form-control-sm"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["for","address",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["id","address","formControlName","address","rows","3","placeholder","Address",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"mouseenter"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],[1,"alert","alert-danger"],[1,"form-text","text-danger"],[1,"text-danger"],[3,"hidden"],[3,"ngValue"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1),r.Ob(),r.uc(2,fe,2,1,"div",1),r.Pb(3,"form",2),r.Zb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),r.Pb(4,"div",3),r.Pb(5,"label",4),r.wc(6,"Name"),r.Ob(),r.Pb(7,"div",5),r.Lb(8,"input",6),r.uc(9,pe,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(10,"div",3),r.Pb(11,"label",8),r.wc(12,"Phone"),r.Ob(),r.Pb(13,"div",5),r.Lb(14,"input",9),r.uc(15,Oe,5,2,"small",10),r.Ob(),r.Ob(),r.Pb(16,"div",3),r.Pb(17,"label",11),r.wc(18,"Email"),r.Ob(),r.Pb(19,"div",5),r.Lb(20,"input",12),r.uc(21,Pe,5,2,"small",10),r.Ob(),r.Ob(),r.Pb(22,"div",3),r.Pb(23,"label",13),r.wc(24,"Password "),r.Ob(),r.Pb(25,"div",5),r.Pb(26,"div",14),r.Lb(27,"input",15),r.Pb(28,"div",16),r.Pb(29,"span",17),r.Zb("click",function(){return t.showPassword=!t.showPassword}),r.Lb(30,"i",18),r.Ob(),r.Ob(),r.Ob(),r.uc(31,ve,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(32,"div",3),r.Pb(33,"label",19),r.wc(34,"Role"),r.Ob(),r.Pb(35,"div",5),r.Pb(36,"select",20),r.Pb(37,"option",21),r.wc(38,"Select a role"),r.Ob(),r.uc(39,ye,2,2,"option",22),r.Ob(),r.uc(40,we,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(41,"div",3),r.Pb(42,"label",23),r.wc(43,"Address"),r.Ob(),r.Pb(44,"div",5),r.Lb(45,"textarea",24),r.uc(46,Le,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(47,"div",25),r.Pb(48,"button",26),r.Zb("mouseenter",function(){return t.mouseoverShifting=!0}),r.wc(49),r.Ob(),r.uc(50,ke,2,0,"button",27),r.Pb(51,"button",28),r.Zb("click",function(){return t.clear()}),r.wc(52,"Clear"),r.Ob(),r.Ob(),r.uc(53,Se,2,1,"div",10),r.Ob()),2&e&&(r.yb(1),r.yc(" ",t.exists?"Update":"New"," User\n"),r.yb(1),r.gc("ngIf",t.errorMessage.length>0),r.yb(1),r.gc("formGroup",t.form),r.yb(6),r.gc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),r.yb(6),r.gc("ngIf",t.form.controls.phone.errors&&t.form.controls.phone.touched),r.yb(5),r.gc("readonly",t.exists),r.yb(1),r.gc("ngIf",t.form.controls.email.errors&&t.form.controls.email.touched),r.yb(6),r.gc("type",t.showPassword?"text":"password")("readonly",t.exists),r.yb(3),r.gc("ngClass",t.showPassword?"fa-eye-slash":"fa-eye"),r.yb(1),r.gc("ngIf",t.form.controls.password.errors&&t.form.controls.password.touched),r.yb(8),r.gc("ngForOf",t.roleList),r.yb(1),r.gc("ngIf",t.form.controls.role.errors&&t.form.controls.role.touched),r.yb(6),r.gc("ngIf",t.form.controls.address.errors&&t.form.controls.address.touched),r.yb(3),r.xc(t.exists?"Update":"Save"),r.yb(1),r.gc("ngIf",t.exists),r.yb(3),r.gc("ngIf",t.mouseoverShifting))},directives:[a.l,O.r,O.j,O.d,O.a,O.i,O.c,O.f,a.j,O.o,O.l,O.q,a.k],styles:[""]}),e})();function Ce(e,t){if(1&e){const e=r.Qb();r.Pb(0,"tr"),r.Pb(1,"th",15),r.wc(2),r.Ob(),r.Pb(3,"td"),r.wc(4),r.Ob(),r.Pb(5,"td"),r.wc(6),r.Ob(),r.Pb(7,"td"),r.wc(8),r.Ob(),r.Pb(9,"td"),r.wc(10),r.Ob(),r.Pb(11,"td"),r.Pb(12,"a",16),r.Zb("click",function(){r.oc(e);const o=t.$implicit;return r.bc().onEdit(o._id)}),r.wc(13,"Edit"),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit,o=t.index;r.yb(2),r.xc(o+1),r.yb(2),r.yc(" ",e.name," "),r.yb(2),r.yc(" ",e.phone," "),r.yb(2),r.yc(" ",e.email," "),r.yb(2),r.yc(" ",e.role," ")}}let De=(()=>{class e{constructor(e,t,o,i){this.userService=e,this.roleService=t,this.auth=o,this.util=i,this.sendingData=!1,this.loadingData=!1,this.userList=[],this.roleList=[],this.page=1,this.pageSize=8,this.userPage=[],this.errorMessage=""}ngOnInit(){this.getUserList(),this.getRoleList()}getRoleList(){return g(this,void 0,void 0,function*(){this.roleService.roles$.subscribe(e=>{this.roleList=e,this.roleList.sort(this.util.dynamicSortObject("name"))})})}getUserList(){return g(this,void 0,void 0,function*(){this.userService.users$.subscribe(e=>{this.userList=e,this.userList.sort(this.util.dynamicSortObject("name")),this.refreshUser()})})}refreshUser(){this.userPage=this.userList.map((e,t)=>Object.assign({id:t+1},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),console.log(this.userPage)}onCreate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:e.name.toLowerCase()});yield this.userService.create(t).then(t=>{console.log(t),this.auth.register(e.email,e.password).then(e=>console.log("User Registration success"))}).catch(e=>{console.log("error",e)})})}onUpdate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:this.util.string_to_slug(e.name),createdAt:this.user.createdAt});yield this.userService.update(this.user._id,t).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Group Updating ERROR ! "}),this.clear()})}onDelete(e){return g(this,void 0,void 0,function*(){this.sendingData=!0,confirm("Are you sure to delete")&&(yield this.userService.delete(e).then(()=>{this.sendingData=!1,this.user=null}).catch(e=>{this.sendingData=!1,this.errorMessage="User Deleting ERROR ! "}),this.clear())})}onEdit(e){this.user=this.userList.find(t=>t._id===e),console.log("onEdit",e)}clear(){this.user=null,this.errorMessage="",this.sendingData=!1,this.loadingData=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(ue.a),r.Kb(se.a),r.Kb(ge.a),r.Kb(p.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-user"]],decls:37,vars:10,consts:[[1,"page-head"],[1,"container"],[1,"row"],[1,"col-md-4","p-md-0","mt-2"],[1,"border","rounded"],[3,"user","roleList","create","update","delete"],[1,"col-md-8","mt-2"],[1,"table","table-striped","border","table-sm"],["colspan","6",1,"form-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"edit_link",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1," User\n"),r.Ob(),r.Pb(2,"div",1),r.Pb(3,"div",2),r.Pb(4,"div",3),r.Pb(5,"div",4),r.Pb(6,"user-form",5),r.Zb("create",function(e){return t.onCreate(e)})("update",function(e){return t.onUpdate(e)})("delete",function(e){return t.onDelete(e)}),r.Ob(),r.Ob(),r.Ob(),r.Pb(7,"div",6),r.Pb(8,"table",7),r.Pb(9,"thead"),r.Pb(10,"tr"),r.Pb(11,"td",8),r.wc(12," User List "),r.Ob(),r.Ob(),r.Pb(13,"tr"),r.Pb(14,"th",9),r.wc(15,"#"),r.Ob(),r.Pb(16,"th",9),r.wc(17,"Name"),r.Ob(),r.Pb(18,"th",9),r.wc(19,"Phone"),r.Ob(),r.Pb(20,"th",9),r.wc(21,"Email"),r.Ob(),r.Pb(22,"th",9),r.wc(23,"Role"),r.Ob(),r.Pb(24,"th",9),r.wc(25,"Action"),r.Ob(),r.Ob(),r.Ob(),r.Pb(26,"tbody"),r.uc(27,Ce,14,5,"tr",10),r.Ob(),r.Ob(),r.Pb(28,"div",11),r.Pb(29,"ngb-pagination",12),r.Zb("pageChange",function(e){return t.page=e})("pageChange",function(){return t.refreshUser()}),r.Ob(),r.Pb(30,"select",13),r.Zb("ngModelChange",function(e){return t.pageSize=e})("ngModelChange",function(){return t.refreshUser()}),r.Pb(31,"option",14),r.wc(32,"4/Page"),r.Ob(),r.Pb(33,"option",14),r.wc(34,"8/Page"),r.Ob(),r.Pb(35,"option",14),r.wc(36,"16/Page"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.yb(6),r.gc("user",t.user)("roleList",t.roleList),r.yb(21),r.gc("ngForOf",t.userPage),r.yb(2),r.gc("collectionSize",t.userList.length)("page",t.page)("pageSize",t.pageSize),r.yb(1),r.gc("ngModel",t.pageSize),r.yb(1),r.gc("ngValue",4),r.yb(2),r.gc("ngValue",8),r.yb(2),r.gc("ngValue",16))},directives:[xe,a.k,c.g,O.o,O.i,O.k,O.l,O.q],styles:[""]}),e})();var Fe=o("OABl");function Me(e,t){if(1&e&&(r.Pb(0,"div",19),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.errorMessage,"\n")}}function je(e,t){1&e&&(r.Pb(0,"small",20),r.wc(1,"Agent Name Required"),r.Ob())}function _e(e,t){1&e&&(r.Pb(0,"small",21),r.wc(1," Father name required "),r.Ob())}function Ee(e,t){if(1&e&&(r.Pb(0,"small",21),r.Pb(1,"div",22),r.wc(2," Phone required "),r.Ob(),r.Pb(3,"div",22),r.wc(4," Phone patter should be 01945564841 "),r.Ob(),r.Ob()),2&e){const e=r.bc();r.yb(1),r.gc("hidden",!e.form.controls.phone.errors.required),r.yb(2),r.gc("hidden",!e.form.controls.phone.errors.pattern)}}function Ie(e,t){1&e&&(r.Pb(0,"small",20),r.wc(1,"Agent address required"),r.Ob())}function ze(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",18),r.Zb("click",function(){return r.oc(e),r.bc().onDelete()}),r.wc(1,"Delete"),r.Ob()}}function Re(e,t){if(1&e&&(r.Pb(0,"div",21),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.getFormValidationErrors()," ")}}let Ne=(()=>{class e{constructor(e){this.fb=e,this.create=new r.n,this.update=new r.n,this.delete=new r.n,this.errorMessage="",this.exists=!1,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){e.agent&&null!=this.agent&&(this.form.reset(),this.exists=!0,this.form.patchValue(this.agent))}createForm(){this.form=this.fb.group({name:["",O.p.required],father:["",O.p.required],phone:["",[O.p.required,O.p.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],address:["",O.p.required]})}submit(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.clear())}getFormValidationErrors(){let e="";return Object.keys(this.form.controls).forEach(t=>{const o=this.form.get(t).errors;null!=o&&Object.keys(o).forEach(o=>{e+=t+" : "+o+"; "})}),e}onDelete(){this.delete.emit(this.agent._id),this.clear()}clear(){this.exists=!1,this.agent=null,this.errorMessage="",this.form.reset()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(O.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["agent-form"]],inputs:{agent:"agent"},outputs:{create:"create",update:"update",delete:"delete"},features:[r.wb],decls:35,vars:10,consts:[[1,"form-head"],["class","alert alert-danger",4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],["for","name",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],[1,"col-sm-10"],["type","text","id","name","formControlName","name","placeholder","Agent Name",1,"form-control","form-control-sm"],["class","form-text text-danger",4,"ngIf"],["for","father",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","text","id","father","formControlName","father","placeholder","Agent father name",1,"form-control","form-control-sm"],["class","text-danger",4,"ngIf"],["for","phone",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","text","id","phone","maxlength","11","formControlName","phone","placeholder","Agent phone",1,"form-control","form-control-sm"],["for","address",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["id","address","formControlName","address","rows","3","placeholder","Address",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"mouseenter"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],[1,"alert","alert-danger"],[1,"form-text","text-danger"],[1,"text-danger"],[3,"hidden"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1),r.Ob(),r.uc(2,Me,2,1,"div",1),r.Pb(3,"form",2),r.Zb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),r.Pb(4,"div",3),r.Pb(5,"label",4),r.wc(6,"Name"),r.Ob(),r.Pb(7,"div",5),r.Lb(8,"input",6),r.uc(9,je,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(10,"div",3),r.Pb(11,"label",8),r.wc(12,"Father"),r.Ob(),r.Pb(13,"div",5),r.Lb(14,"input",9),r.uc(15,_e,2,0,"small",10),r.Ob(),r.Ob(),r.Pb(16,"div",3),r.Pb(17,"label",11),r.wc(18,"Phone"),r.Ob(),r.Pb(19,"div",5),r.Lb(20,"input",12),r.uc(21,Ee,5,2,"small",10),r.Ob(),r.Ob(),r.Pb(22,"div",3),r.Pb(23,"label",13),r.wc(24,"Address"),r.Ob(),r.Pb(25,"div",5),r.Lb(26,"textarea",14),r.uc(27,Ie,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(28,"div",15),r.Pb(29,"button",16),r.Zb("mouseenter",function(){return t.mouseoverShifting=!0}),r.wc(30),r.Ob(),r.uc(31,ze,2,0,"button",17),r.Pb(32,"button",18),r.Zb("click",function(){return t.clear()}),r.wc(33,"Clear"),r.Ob(),r.Ob(),r.uc(34,Re,2,1,"div",10),r.Ob()),2&e&&(r.yb(1),r.yc(" ",t.exists?"Update":"New"," Agent\n"),r.yb(1),r.gc("ngIf",t.errorMessage.length>0),r.yb(1),r.gc("formGroup",t.form),r.yb(6),r.gc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),r.yb(6),r.gc("ngIf",t.form.controls.father.errors&&t.form.controls.father.touched),r.yb(6),r.gc("ngIf",t.form.controls.phone.errors&&t.form.controls.phone.touched),r.yb(6),r.gc("ngIf",t.form.controls.address.errors&&t.form.controls.address.touched),r.yb(3),r.xc(t.exists?"Update":"Save"),r.yb(1),r.gc("ngIf",t.exists),r.yb(3),r.gc("ngIf",t.mouseoverShifting))},directives:[a.l,O.r,O.j,O.d,O.a,O.i,O.c,O.f],styles:[""]}),e})();function Ve(e,t){if(1&e){const e=r.Qb();r.Pb(0,"tr"),r.Pb(1,"th",15),r.wc(2),r.Ob(),r.Pb(3,"td"),r.wc(4),r.Ob(),r.Pb(5,"td"),r.wc(6),r.Ob(),r.Pb(7,"td"),r.wc(8),r.Ob(),r.Pb(9,"td"),r.Pb(10,"a",16),r.Zb("click",function(){r.oc(e);const o=t.$implicit;return r.bc().onEdit(o._id)}),r.wc(11,"Edit"),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit,o=t.index;r.yb(2),r.xc(o+1),r.yb(2),r.yc(" ",e.name," "),r.yb(2),r.yc(" ",e.father," "),r.yb(2),r.yc(" ",e.phone," ")}}let Ze=(()=>{class e{constructor(e,t){this.agentService=e,this.util=t,this.sendingData=!1,this.loadingData=!1,this.agentList=[],this.page=1,this.pageSize=8,this.agentPage=[],this.errorMessage=""}ngOnInit(){this.getAgentList()}getAgentList(){return g(this,void 0,void 0,function*(){this.agentService.agents$.subscribe(e=>{this.agentList=e,this.agentList.sort(this.util.dynamicSortObject("priority")),this.refreshAgent()})})}refreshAgent(){this.agentPage=this.agentList.map((e,t)=>Object.assign({id:t+1},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}onCreate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:this.util.string_to_slug(e.name)});yield this.agentService.create(t).then(e=>{console.log(e)}).catch(e=>{console.log("error",e)})})}onUpdate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:e.name.toLowerCase(),createdAt:this.agent.createdAt});yield this.agentService.update(this.agent._id,t).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Group Updating ERROR ! "}),this.clear()})}onDelete(e){return g(this,void 0,void 0,function*(){this.sendingData=!0,confirm("Are you sure to delete")&&(yield this.agentService.delete(e).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Agent Deleting ERROR ! "}),this.clear())})}onEdit(e){this.agent=this.agentList.find(t=>t._id===e)}clear(){this.agent=null,this.errorMessage="",this.sendingData=!1,this.loadingData=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(Fe.a),r.Kb(p.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-agent"]],decls:35,vars:9,consts:[[1,"page-head"],[1,"container"],[1,"row"],[1,"col-md-4","p-md-0","mt-2"],[1,"border","rounded"],[3,"agent","create","update","delete"],[1,"col-md-8","mt-2"],[1,"table","table-striped","border","table-sm"],["colspan","5",1,"form-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"edit_link",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1," Agent\n"),r.Ob(),r.Pb(2,"div",1),r.Pb(3,"div",2),r.Pb(4,"div",3),r.Pb(5,"div",4),r.Pb(6,"agent-form",5),r.Zb("create",function(e){return t.onCreate(e)})("update",function(e){return t.onUpdate(e)})("delete",function(e){return t.onDelete(e)}),r.Ob(),r.Ob(),r.Ob(),r.Pb(7,"div",6),r.Pb(8,"table",7),r.Pb(9,"thead"),r.Pb(10,"tr"),r.Pb(11,"td",8),r.wc(12," Agent List "),r.Ob(),r.Ob(),r.Pb(13,"tr"),r.Pb(14,"th",9),r.wc(15,"#"),r.Ob(),r.Pb(16,"th",9),r.wc(17,"Name"),r.Ob(),r.Pb(18,"th",9),r.wc(19,"Father"),r.Ob(),r.Pb(20,"th",9),r.wc(21,"Phone"),r.Ob(),r.Pb(22,"th",9),r.wc(23,"Action"),r.Ob(),r.Ob(),r.Ob(),r.Pb(24,"tbody"),r.uc(25,Ve,12,4,"tr",10),r.Ob(),r.Ob(),r.Pb(26,"div",11),r.Pb(27,"ngb-pagination",12),r.Zb("pageChange",function(e){return t.page=e})("pageChange",function(){return t.refreshAgent()}),r.Ob(),r.Pb(28,"select",13),r.Zb("ngModelChange",function(e){return t.pageSize=e})("ngModelChange",function(){return t.refreshAgent()}),r.Pb(29,"option",14),r.wc(30,"4/Page"),r.Ob(),r.Pb(31,"option",14),r.wc(32,"8/Page"),r.Ob(),r.Pb(33,"option",14),r.wc(34,"16/Page"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.yb(6),r.gc("agent",t.agent),r.yb(19),r.gc("ngForOf",t.agentPage),r.yb(2),r.gc("collectionSize",t.agentList.length)("page",t.page)("pageSize",t.pageSize),r.yb(1),r.gc("ngModel",t.pageSize),r.yb(1),r.gc("ngValue",4),r.yb(2),r.gc("ngValue",8),r.yb(2),r.gc("ngValue",16))},directives:[Ne,a.k,c.g,O.o,O.i,O.k,O.l,O.q],styles:[""]}),e})();var qe=o("1Wpa");function Ae(e,t){if(1&e&&(r.Pb(0,"div",19),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.errorMessage," ")}}function Ue(e,t){1&e&&(r.Pb(0,"small",20),r.wc(1,"Loading Party Name Required"),r.Ob())}function $e(e,t){1&e&&(r.Pb(0,"small",21),r.wc(1," Father name required "),r.Ob())}function Ke(e,t){if(1&e&&(r.Pb(0,"small",21),r.Pb(1,"div",22),r.wc(2," Phone required "),r.Ob(),r.Pb(3,"div",22),r.wc(4," Phone patter should be 01945564841 "),r.Ob(),r.Ob()),2&e){const e=r.bc();r.yb(1),r.gc("hidden",!e.form.controls.phone.errors.required),r.yb(2),r.gc("hidden",!e.form.controls.phone.errors.pattern)}}function Ge(e,t){1&e&&(r.Pb(0,"small",20),r.wc(1,"Loading Party address required"),r.Ob())}function Qe(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",18),r.Zb("click",function(){return r.oc(e),r.bc().onDelete()}),r.wc(1,"Delete"),r.Ob()}}function He(e,t){if(1&e&&(r.Pb(0,"div",21),r.wc(1),r.Ob()),2&e){const e=r.bc();r.yb(1),r.yc(" ",e.getFormValidationErrors()," ")}}let Je=(()=>{class e{constructor(e){this.fb=e,this.create=new r.n,this.update=new r.n,this.delete=new r.n,this.errorMessage="",this.exists=!1,this.mouseoverShifting=!1,this.createForm()}ngOnChanges(e){e.customer&&null!=this.customer&&(this.form.reset(),this.exists=!0,this.form.patchValue(this.customer))}createForm(){this.form=this.fb.group({name:["",O.p.required],father:["",O.p.required],phone:["",[O.p.required,O.p.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],address:["",O.p.required]})}submit(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.clear())}getFormValidationErrors(){let e="";return Object.keys(this.form.controls).forEach(t=>{const o=this.form.get(t).errors;null!=o&&Object.keys(o).forEach(o=>{e+=t+" : "+o+"; "})}),e}onDelete(){this.delete.emit(this.customer._id),this.clear()}clear(){this.exists=!1,this.customer=null,this.errorMessage="",this.form.reset()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(O.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["customer-form"]],inputs:{customer:"customer"},outputs:{create:"create",update:"update",delete:"delete"},features:[r.wb],decls:35,vars:10,consts:[[1,"form-head"],["class","alert alert-danger",4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],["for","name",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],[1,"col-sm-10"],["type","text","id","name","formControlName","name","placeholder","Loading Party Name",1,"form-control","form-control-sm"],["class","form-text text-danger",4,"ngIf"],["for","father",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","text","id","father","formControlName","father","placeholder","Loading Party father name",1,"form-control","form-control-sm"],["class","text-danger",4,"ngIf"],["for","phone",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["type","text","id","phone","maxlength","11","formControlName","phone","placeholder","Loading Party phone",1,"form-control","form-control-sm"],["for","address",1,"d-none","d-sm-block","col-sm-2","col-form-label","col-form-label-sm"],["id","address","formControlName","address","rows","3","placeholder","Address",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"mouseenter"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],[1,"alert","alert-danger"],[1,"form-text","text-danger"],[1,"text-danger"],[3,"hidden"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1),r.Ob(),r.uc(2,Ae,2,1,"div",1),r.Pb(3,"form",2),r.Zb("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),r.Pb(4,"div",3),r.Pb(5,"label",4),r.wc(6,"Name"),r.Ob(),r.Pb(7,"div",5),r.Lb(8,"input",6),r.uc(9,Ue,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(10,"div",3),r.Pb(11,"label",8),r.wc(12,"Father"),r.Ob(),r.Pb(13,"div",5),r.Lb(14,"input",9),r.uc(15,$e,2,0,"small",10),r.Ob(),r.Ob(),r.Pb(16,"div",3),r.Pb(17,"label",11),r.wc(18,"Phone"),r.Ob(),r.Pb(19,"div",5),r.Lb(20,"input",12),r.uc(21,Ke,5,2,"small",10),r.Ob(),r.Ob(),r.Pb(22,"div",3),r.Pb(23,"label",13),r.wc(24,"Address"),r.Ob(),r.Pb(25,"div",5),r.Lb(26,"textarea",14),r.uc(27,Ge,2,0,"small",7),r.Ob(),r.Ob(),r.Pb(28,"div",15),r.Pb(29,"button",16),r.Zb("mouseenter",function(){return t.mouseoverShifting=!0}),r.wc(30),r.Ob(),r.uc(31,Qe,2,0,"button",17),r.Pb(32,"button",18),r.Zb("click",function(){return t.clear()}),r.wc(33,"Clear"),r.Ob(),r.Ob(),r.uc(34,He,2,1,"div",10),r.Ob()),2&e&&(r.yb(1),r.yc(" ",t.exists?"Update":"New"," Loading Party "),r.yb(1),r.gc("ngIf",t.errorMessage.length>0),r.yb(1),r.gc("formGroup",t.form),r.yb(6),r.gc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),r.yb(6),r.gc("ngIf",t.form.controls.father.errors&&t.form.controls.father.touched),r.yb(6),r.gc("ngIf",t.form.controls.phone.errors&&t.form.controls.phone.touched),r.yb(6),r.gc("ngIf",t.form.controls.address.errors&&t.form.controls.address.touched),r.yb(3),r.xc(t.exists?"Update":"Save"),r.yb(1),r.gc("ngIf",t.exists),r.yb(3),r.gc("ngIf",t.mouseoverShifting))},directives:[a.l,O.r,O.j,O.d,O.a,O.i,O.c,O.f],styles:[""]}),e})();function Te(e,t){if(1&e){const e=r.Qb();r.Pb(0,"tr"),r.Pb(1,"th",15),r.wc(2),r.Ob(),r.Pb(3,"td"),r.wc(4),r.Ob(),r.Pb(5,"td"),r.wc(6),r.Ob(),r.Pb(7,"td"),r.wc(8),r.Ob(),r.Pb(9,"td"),r.Pb(10,"a",16),r.Zb("click",function(){r.oc(e);const o=t.$implicit;return r.bc().onEdit(o._id)}),r.wc(11,"Edit"),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit,o=t.index;r.yb(2),r.xc(o+1),r.yb(2),r.yc(" ",e.name," "),r.yb(2),r.yc(" ",e.father," "),r.yb(2),r.yc(" ",e.phone," ")}}const Xe=[{path:"",component:u,children:[{path:"chamber",component:x},{path:"floor",component:R},{path:"line",component:H},{path:"pocket",component:re},{path:"agent",component:Ze},{path:"customer",component:(()=>{class e{constructor(e,t){this.customerService=e,this.util=t,this.sendingData=!1,this.loadingData=!1,this.customerList=[],this.page=1,this.pageSize=8,this.customerPage=[],this.errorMessage=""}ngOnInit(){this.getCustomerList()}getCustomerList(){return g(this,void 0,void 0,function*(){this.customerService.customers$.subscribe(e=>{this.customerList=e,this.customerList.sort(this.util.dynamicSortObject("priority")),this.refreshCustomer()})})}refreshCustomer(){this.customerPage=this.customerList.map((e,t)=>Object.assign({id:t+1},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}onCreate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:this.util.string_to_slug(e.name)});yield this.customerService.create(t).then(e=>{console.log(e)}).catch(e=>{console.log("error",e)})})}onUpdate(e){return g(this,void 0,void 0,function*(){this.sendingData=!0;const t=Object.assign(Object.assign({},e),{slug:e.name.toLowerCase(),createdAt:this.customer.createdAt});yield this.customerService.update(this.customer._id,t).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Group Updating ERROR ! "}),this.clear()})}onDelete(e){return g(this,void 0,void 0,function*(){this.sendingData=!0,confirm("Are you sure to delete")&&(yield this.customerService.delete(e).then(()=>{this.sendingData=!1}).catch(e=>{this.sendingData=!1,this.errorMessage="Agent Deleting ERROR ! "}),this.clear())})}onEdit(e){this.customer=this.customerList.find(t=>t._id===e)}clear(){this.customer=null,this.errorMessage="",this.sendingData=!1,this.loadingData=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(qe.a),r.Kb(p.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-customer"]],decls:35,vars:9,consts:[[1,"page-head"],[1,"container"],[1,"row"],[1,"col-md-4","p-md-0","mt-2"],[1,"border","rounded"],[3,"customer","create","update","delete"],[1,"col-md-8","mt-2"],[1,"table","table-striped","border","table-sm"],["colspan","5",1,"form-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","row"],[1,"edit_link",3,"click"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.wc(1," Loading Party\n"),r.Ob(),r.Pb(2,"div",1),r.Pb(3,"div",2),r.Pb(4,"div",3),r.Pb(5,"div",4),r.Pb(6,"customer-form",5),r.Zb("create",function(e){return t.onCreate(e)})("update",function(e){return t.onUpdate(e)})("delete",function(e){return t.onDelete(e)}),r.Ob(),r.Ob(),r.Ob(),r.Pb(7,"div",6),r.Pb(8,"table",7),r.Pb(9,"thead"),r.Pb(10,"tr"),r.Pb(11,"td",8),r.wc(12," Loading Party List "),r.Ob(),r.Ob(),r.Pb(13,"tr"),r.Pb(14,"th",9),r.wc(15,"#"),r.Ob(),r.Pb(16,"th",9),r.wc(17,"Name"),r.Ob(),r.Pb(18,"th",9),r.wc(19,"Father"),r.Ob(),r.Pb(20,"th",9),r.wc(21,"Phone"),r.Ob(),r.Pb(22,"th",9),r.wc(23,"Action"),r.Ob(),r.Ob(),r.Ob(),r.Pb(24,"tbody"),r.uc(25,Te,12,4,"tr",10),r.Ob(),r.Ob(),r.Pb(26,"div",11),r.Pb(27,"ngb-pagination",12),r.Zb("pageChange",function(e){return t.page=e})("pageChange",function(){return t.refreshCustomer()}),r.Ob(),r.Pb(28,"select",13),r.Zb("ngModelChange",function(e){return t.pageSize=e})("ngModelChange",function(){return t.refreshCustomer()}),r.Pb(29,"option",14),r.wc(30,"4/Page"),r.Ob(),r.Pb(31,"option",14),r.wc(32,"8/Page"),r.Ob(),r.Pb(33,"option",14),r.wc(34,"16/Page"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.yb(6),r.gc("customer",t.customer),r.yb(19),r.gc("ngForOf",t.customerPage),r.yb(2),r.gc("collectionSize",t.customerList.length)("page",t.page)("pageSize",t.pageSize),r.yb(1),r.gc("ngModel",t.pageSize),r.yb(1),r.gc("ngValue",4),r.yb(2),r.gc("ngValue",8),r.yb(2),r.gc("ngValue",16))},directives:[Je,a.k,c.g,O.o,O.i,O.k,O.l,O.q],styles:[""]}),e})()},{path:"user",component:De},{path:"role",component:me},{path:"",component:s}]}];let We=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[n.a,i.d.forChild(Xe)]]}),e})()}}]);