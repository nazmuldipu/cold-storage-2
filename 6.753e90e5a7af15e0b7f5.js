(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"3awO":function(t,e,a){"use strict";a.r(e),a.d(e,"ROUTES",function(){return W}),a.d(e,"ReportModule",function(){return tt});var n=a("tyNb"),c=a("B01t"),i=a("KZX/"),r=a("fXoL");let b=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-index"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Pb(0,"p"),r.xc(1,"index works!"),r.Ob())},styles:[""]}),t})();var o=a("mrSG"),s=a("IzEk"),d=a("JrkW"),l=a("z3bE"),u=a("ofXK"),g=a("lCxQ"),h=a("1kSV"),y=a("3Pt+");function p(t,e){if(1&t){const t=r.Qb();r.Nb(0),r.Pb(1,"div",17),r.Pb(2,"button",18),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(-1)}),r.Lb(3,"i",19),r.Ob(),r.Ob(),r.Pb(4,"div",20),r.Pb(5,"div",21),r.Pb(6,"div",22),r.Pb(7,"div",23),r.xc(8,"Date"),r.Ob(),r.Ob(),r.Pb(9,"input",24,25),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()})("ngModelChange",function(e){return r.pc(t),r.bc().date=e})("dateSelect",function(){return r.pc(t),r.bc().adjustDay(0)}),r.Ob(),r.Pb(11,"div",26),r.Pb(12,"button",27),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()}),r.Lb(13,"i",28),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Pb(14,"div",17),r.Pb(15,"button",18),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(1)}),r.Lb(16,"i",29),r.Ob(),r.Ob(),r.Mb()}if(2&t){const t=r.bc();r.yb(9),r.hc("ngModel",t.date)}}function O(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",17),r.Pb(1,"div",30),r.Pb(2,"div",22),r.Pb(3,"div",23),r.xc(4,"Date"),r.Ob(),r.Ob(),r.Pb(5,"input",31),r.Zb("selected",function(e){return r.pc(t),r.bc().selectedDate(e)}),r.Ob(),r.Ob(),r.Ob()}if(2&t){const t=r.bc();r.yb(5),r.hc("options",t.options)}}let P=(()=>{class t{constructor(t,e){this.inventoryService=t,this.util=e,this.total=0,this.mode="day",this.inventoryList=[],this.filteredInventoryList=[],this.daterange={},this.year=(new Date).getFullYear(),this.date=this.util.convertJsDateToNgbDate(new Date)}ngOnInit(){this.setDateRanges(),this.onModechange(this.mode)}setDateRanges(){this.daterange.endDate=new Date,this.daterange.startDate=new Date,this.daterange.startDate.setDate(this.daterange.startDate.getDate()-20);const t=new Date;t.setDate(this.daterange.startDate.getDate()-90);const e=new Date;e.setDate(this.daterange.startDate.getDate()+23),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}selectedDate(t){this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.getInventoryByDateRange(this.daterange.startDate,this.daterange.endDate)}getInventoryByDateRange(t,e){return Object(o.a)(this,void 0,void 0,function*(){this.inventoryService.inventorys$.pipe(Object(s.a)(2)).subscribe(a=>{this.inventoryList=a.filter(a=>a.date.seconds>=t.getTime()/1e3&&a.date.seconds<=e.getTime()/1e3),this.inventoryList.sort(this.util.dynamicSortObject("sr_no"))})})}adjustDay(t){let e=new Date(this.date.year,this.date.month-1,this.date.day+t);this.date=this.util.convertJsDateToNgbDate(e);const a=new Date(this.date.year,this.date.month-1,this.date.day);a.setHours(0,0,0,0);const n=new Date(this.date.year,this.date.month-1,this.date.day);n.setHours(23,59,59,999),this.getInventoryByDateRange(a,n)}onModechange(t){switch(this.mode=t,t){case"day":this.adjustDay(0);break;case"range":this.getInventoryByDateRange(this.daterange.startDate,this.daterange.endDate)}}getDateString(){return this.date.day+"/"+this.date.month+"/"+this.date.year}getDateRangeString(){return this.util.getDateStringLocal(this.daterange.startDate)+" to "+this.util.getDateStringLocal(this.daterange.endDate)}onPrint(){window.print()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(d.a),r.Kb(l.a))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-inventory-report"]],decls:24,vars:7,consts:[[1,"page-head","d-print-none"],[1,"d-flex","justify-content-between"],[1,""],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],[1,"container"],[1,"row","d-print-none"],[4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"col"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[1,"text-center","mt-3"],[3,"inventoryList","list"],[1,"col-auto"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto","p-0"],[1,"input-group","input-group-sm"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","click","ngModelChange","dateSelect"],["rDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],[1,"input-group","input-group-sm","mb-2"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.Pb(1,"div",1),r.Pb(2,"div",2),r.xc(3,"Inventory Report"),r.Ob(),r.Pb(4,"div",3),r.Pb(5,"a",4),r.Zb("click",function(){return e.onModechange("day")}),r.xc(6,"Day"),r.Ob(),r.Pb(7,"a",4),r.Zb("click",function(){return e.onModechange("range")}),r.xc(8,"Range"),r.Ob(),r.Ob(),r.Lb(9,"div",2),r.Ob(),r.Ob(),r.Pb(10,"div",5),r.Pb(11,"div",6),r.vc(12,p,17,1,"ng-container",7),r.vc(13,O,6,1,"div",8),r.Lb(14,"div",9),r.Pb(15,"div",10),r.Pb(16,"button",11),r.Zb("click",function(){return e.onPrint()}),r.Lb(17,"i",12),r.xc(18," Print "),r.Ob(),r.Ob(),r.Ob(),r.Pb(19,"div",13),r.Pb(20,"div",14),r.Pb(21,"h4",15),r.xc(22),r.Ob(),r.Lb(23,"inventory-table",16),r.Ob(),r.Ob(),r.Ob()),2&t&&(r.yb(5),r.hc("ngClass","day"==e.mode?"btn-primary":"btn-light"),r.yb(2),r.hc("ngClass","range"==e.mode?"btn-primary":"btn-light"),r.yb(5),r.hc("ngIf","day"==e.mode),r.yb(1),r.hc("ngIf","range"==e.mode),r.yb(9),r.zc("Inventory Report for ","day"==e.mode?"Date: "+e.getDateString():"Date range: "+e.getDateRangeString(),""),r.yb(1),r.hc("inventoryList",e.inventoryList)("list",!0))},directives:[u.l,u.n,g.a,h.f,y.a,y.i,y.l,c.b],styles:["[_nghost-%COMP%]{background-color:#f0f2f5;display:block;min-height:calc(100vh - 30px)}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-family:SolaimanLipi}.container[_ngcontent-%COMP%]{background-color:#fff}td[_ngcontent-%COMP%]{padding:15px}@page{size[_ngcontent-%COMP%]:A4;margin[_ngcontent-%COMP%]:0;padding:15px}@media print{@page{size[_ngcontent-%COMP%]:A4;padding:15px}}.form-group.hidden[_ngcontent-%COMP%]{width:0;margin:0;border:none;padding:0}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:rgba(2,117,216,.5)}"]}),t})();var m=a("1IUP"),D=a("r0Oy");function f(t,e){if(1&t){const t=r.Qb();r.Nb(0),r.Pb(1,"div",17),r.Pb(2,"button",18),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(-1)}),r.Lb(3,"i",19),r.Ob(),r.Ob(),r.Pb(4,"div",20),r.Pb(5,"div",21),r.Pb(6,"div",22),r.Pb(7,"div",23),r.xc(8,"Date"),r.Ob(),r.Ob(),r.Pb(9,"input",24,25),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()})("ngModelChange",function(e){return r.pc(t),r.bc().date=e})("dateSelect",function(){return r.pc(t),r.bc().adjustDay(0)}),r.Ob(),r.Pb(11,"div",26),r.Pb(12,"a",27),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()}),r.Lb(13,"i",28),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Pb(14,"div",17),r.Pb(15,"button",18),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(1)}),r.Lb(16,"i",29),r.Ob(),r.Ob(),r.Mb()}if(2&t){const t=r.bc();r.yb(9),r.hc("ngModel",t.date)}}function v(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",17),r.Pb(1,"div",30),r.Pb(2,"div",22),r.Pb(3,"div",23),r.xc(4,"Date"),r.Ob(),r.Ob(),r.Pb(5,"input",31),r.Zb("selected",function(e){return r.pc(t),r.bc().selectedDate(e)}),r.Ob(),r.Ob(),r.Ob()}if(2&t){const t=r.bc();r.yb(5),r.hc("options",t.options)}}let x=(()=>{class t{constructor(t,e){this.ledgerService=t,this.util=e,this.mode="day",this.daterange={},this.ledgerList=[],this.year=(new Date).getFullYear(),this.date=this.util.convertJsDateToNgbDate(new Date)}ngOnInit(){this.setDateRanges()}setDateRanges(){this.daterange.endDate=new Date,this.daterange.startDate=new Date,this.daterange.startDate.setDate(this.daterange.startDate.getDate()-20);const t=new Date;t.setDate(this.daterange.startDate.getDate()-90);const e=new Date;e.setDate(this.daterange.startDate.getDate()+23),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}selectedDate(t){this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.getLedgerByDateRange(this.daterange.startDate,this.daterange.endDate)}getLedgerByDateRange(t,e){return Object(o.a)(this,void 0,void 0,function*(){this.ledgerService.ledgers$.pipe(Object(s.a)(2)).subscribe(a=>{this.ledgerList=a.filter(a=>a.createdAt.seconds>=t.getTime()/1e3&&a.createdAt.seconds<=e.getTime()/1e3),this.ledgerList.sort(this.util.dynamicSortObject("createdAt"))})})}onModechange(t){switch(this.mode=t,t){case"day":this.adjustDay(0);break;case"range":this.getLedgerByDateRange(this.daterange.startDate,this.daterange.endDate)}}adjustDay(t){let e=new Date(this.date.year,this.date.month-1,this.date.day+t);this.date=this.util.convertJsDateToNgbDate(e);const a=new Date(this.date.year,this.date.month-1,this.date.day);a.setHours(0,0,0,0);const n=new Date(this.date.year,this.date.month-1,this.date.day);n.setHours(23,59,59,999),this.getLedgerByDateRange(a,n)}getDateString(){return this.date.day+"/"+this.date.month+"/"+this.date.year}getDateRangeString(){return this.util.getDateStringLocal(this.daterange.startDate)+" to "+this.util.getDateStringLocal(this.daterange.endDate)}onPrint(){window.print()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(m.a),r.Kb(l.a))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-ledger-report"]],decls:24,vars:6,consts:[[1,"page-head","d-print-none"],[1,"d-flex","justify-content-between"],[1,""],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],[1,"container"],[1,"row","d-print-none"],[4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"col"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[1,"text-center","mt-3"],[3,"ledgerList"],[1,"col-auto"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto","p-0"],[1,"input-group","input-group-sm"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","click","ngModelChange","dateSelect"],["rDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],[1,"input-group","input-group-sm","mb-2"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.Pb(1,"div",1),r.Pb(2,"div",2),r.xc(3,"Ledger Report"),r.Ob(),r.Pb(4,"div",3),r.Pb(5,"a",4),r.Zb("click",function(){return e.onModechange("day")}),r.xc(6,"Day"),r.Ob(),r.Pb(7,"a",4),r.Zb("click",function(){return e.onModechange("range")}),r.xc(8,"Range"),r.Ob(),r.Ob(),r.Lb(9,"div",2),r.Ob(),r.Ob(),r.Pb(10,"div",5),r.Pb(11,"div",6),r.vc(12,f,17,1,"ng-container",7),r.vc(13,v,6,1,"div",8),r.Lb(14,"div",9),r.Pb(15,"div",10),r.Pb(16,"button",11),r.Zb("click",function(){return e.onPrint()}),r.Lb(17,"i",12),r.xc(18," Print "),r.Ob(),r.Ob(),r.Ob(),r.Pb(19,"div",13),r.Pb(20,"div",14),r.Pb(21,"h4",15),r.xc(22),r.Ob(),r.Lb(23,"ledger-list",16),r.Ob(),r.Ob(),r.Ob()),2&t&&(r.yb(5),r.hc("ngClass","day"==e.mode?"btn-primary":"btn-light"),r.yb(2),r.hc("ngClass","range"==e.mode?"btn-primary":"btn-light"),r.yb(5),r.hc("ngIf","day"==e.mode),r.yb(1),r.hc("ngIf","range"==e.mode),r.yb(9),r.zc("Ledger Report for ","day"==e.mode?"Date: "+e.getDateString():"Date range: "+e.getDateRangeString(),""),r.yb(1),r.hc("ledgerList",e.ledgerList))},directives:[u.l,u.n,D.a,h.f,y.a,y.i,y.l,c.b],styles:["[_nghost-%COMP%]{background-color:#f0f2f5;display:block;min-height:calc(100vh - 30px)}.container[_ngcontent-%COMP%]{background-color:#fff}"]}),t})();class L{constructor(t){this.createdAt=t.createdAt,this.year=t.year,this.customer=t.customer,this.agent=t.agent,this.sr_no=t.sr_no,this.amount=t.loan_amount,this.rate=t.loan_rate,this.profit=t.loan_profit,this.payable=t.loan_payable}}var _=a("/TAm");function w(t,e){if(1&t&&(r.Pb(0,"tr"),r.Pb(1,"th",9),r.xc(2),r.Ob(),r.Pb(3,"td"),r.xc(4),r.cc(5,"date"),r.Ob(),r.Pb(6,"td"),r.xc(7),r.Ob(),r.Pb(8,"td"),r.xc(9),r.Ob(),r.Pb(10,"td"),r.xc(11),r.Ob(),r.Pb(12,"td",6),r.xc(13),r.cc(14,"currencyBd"),r.Ob(),r.Pb(15,"td",6),r.xc(16),r.cc(17,"currencyBd"),r.Ob(),r.Pb(18,"td",6),r.xc(19),r.cc(20,"currencyBd"),r.Ob(),r.Pb(21,"td",6),r.xc(22),r.cc(23,"currencyBd"),r.Ob(),r.Ob()),2&t){const t=e.$implicit,a=e.index;r.yb(2),r.yc(a+1),r.yb(2),r.zc(" ",r.ec(5,10,t.createdAt.toMillis(),"dd/MM/yyyy")," "),r.yb(3),r.zc(" ",t.sr_no," "),r.yb(2),r.Ac(" ",null==t||null==t.customer?null:t.customer.name,"[",null==t||null==t.customer?null:t.customer.phone,"]"),r.yb(2),r.zc(" ",null==t||null==t.agent?null:t.agent.name," "),r.yb(2),r.zc(" ",r.dc(14,13,null==t?null:t.amount)," "),r.yb(3),r.zc(" ",r.dc(17,15,null==t?null:t.rate)," "),r.yb(3),r.zc(" ",r.dc(20,17,null==t?null:t.profit)," "),r.yb(3),r.zc(" ",r.dc(23,19,null==t?null:t.payable)," ")}}let k=(()=>{class t{constructor(){this.total={amount:0,profit:0,payable:0}}ngOnChanges(t){t.loanList&&this.loanList.length>0&&this.calculateTotal()}calculateTotal(){this.total={amount:0,profit:0,payable:0},this.loanList.forEach(t=>{this.total.amount+=t.amount,this.total.profit+=t.profit,this.total.payable+=t.payable})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["loan-table"]],inputs:{loanList:"loanList"},features:[r.wb],decls:45,vars:10,consts:[[1,"table","table-striped","border","table-sm"],["colspan","8",1,"form-head"],[1,"form-head","d-print-none"],["scope","col"],["scope","col","colspan","4",1,"text-center"],["colspan","5"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","5",1,"text-right"],["scope","row"]],template:function(t,e){1&t&&(r.Pb(0,"table",0),r.Pb(1,"thead"),r.Pb(2,"tr"),r.Pb(3,"td",1),r.xc(4," Loan List "),r.Ob(),r.Lb(5,"td",2),r.Ob(),r.Pb(6,"tr"),r.Pb(7,"th",3),r.xc(8,"#"),r.Ob(),r.Pb(9,"th",3),r.xc(10,"Date"),r.Ob(),r.Pb(11,"th",3),r.xc(12,"SR.NO."),r.Ob(),r.Pb(13,"th",3),r.xc(14,"Party"),r.Ob(),r.Pb(15,"th",3),r.xc(16,"Agent"),r.Ob(),r.Pb(17,"th",4),r.xc(18,"Loan"),r.Ob(),r.Ob(),r.Pb(19,"tr"),r.Lb(20,"td",5),r.Pb(21,"th",6),r.xc(22,"Amount"),r.Ob(),r.Pb(23,"th",6),r.xc(24,"Rate"),r.Ob(),r.Pb(25,"th",6),r.xc(26,"Profit"),r.Ob(),r.Pb(27,"th",6),r.xc(28,"Payable"),r.Ob(),r.Ob(),r.Ob(),r.Pb(29,"tbody"),r.vc(30,w,24,21,"tr",7),r.Ob(),r.Pb(31,"tfoot"),r.Pb(32,"tr"),r.Pb(33,"th",8),r.xc(34,"Total"),r.Ob(),r.Pb(35,"th",6),r.xc(36),r.cc(37,"currencyBd"),r.Ob(),r.Lb(38,"th"),r.Pb(39,"th",6),r.xc(40),r.cc(41,"currencyBd"),r.Ob(),r.Pb(42,"th",6),r.xc(43),r.cc(44,"currencyBd"),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&t&&(r.yb(30),r.hc("ngForOf",e.loanList),r.yb(6),r.yc(r.dc(37,4,e.total.amount)),r.yb(4),r.yc(r.dc(41,6,e.total.profit)),r.yb(3),r.yc(r.dc(44,8,e.total.payable)))},directives:[u.m],pipes:[_.a,u.d],styles:[""]}),t})();function M(t,e){if(1&t){const t=r.Qb();r.Nb(0),r.Pb(1,"div",15),r.Pb(2,"button",16),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(-1)}),r.Lb(3,"i",17),r.Ob(),r.Ob(),r.Pb(4,"div",18),r.Pb(5,"div",19),r.Pb(6,"div",20),r.Pb(7,"div",21),r.xc(8,"Date"),r.Ob(),r.Ob(),r.Pb(9,"input",22,23),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()})("ngModelChange",function(e){return r.pc(t),r.bc().date=e})("dateSelect",function(){return r.pc(t),r.bc().adjustDay(0)}),r.Ob(),r.Pb(11,"div",24),r.Pb(12,"button",25),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()}),r.Lb(13,"i",26),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Pb(14,"div",15),r.Pb(15,"button",16),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(1)}),r.Lb(16,"i",27),r.Ob(),r.Ob(),r.Mb()}if(2&t){const t=r.bc();r.yb(9),r.hc("ngModel",t.date)}}function S(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",15),r.Pb(1,"div",28),r.Pb(2,"div",20),r.Pb(3,"div",21),r.xc(4,"Date"),r.Ob(),r.Ob(),r.Pb(5,"input",29),r.Zb("selected",function(e){return r.pc(t),r.bc().selectedDate(e)}),r.Ob(),r.Ob(),r.Ob()}if(2&t){const t=r.bc();r.yb(5),r.hc("options",t.options)}}function R(t,e){if(1&t&&(r.Pb(0,"div",30),r.Pb(1,"h4",31),r.xc(2),r.Ob(),r.Lb(3,"loan-table",32),r.Ob()),2&t){const t=r.bc();r.yb(2),r.zc("Loan Report for ","day"==t.mode?"Date: "+t.getDateString():"Date range: "+t.getDateRangeString(),""),r.yb(1),r.hc("loanList",t.loanList)}}let B=(()=>{class t{constructor(t,e){this.ledgerService=t,this.util=e,this.mode="day",this.daterange={},this.loanList=[],this.year=(new Date).getFullYear()}ngOnInit(){this.date=this.util.convertJsDateToNgbDate(new Date),this.setDateRanges(),this.onModechange("day")}setDateRanges(){this.daterange.endDate=new Date,this.daterange.startDate=new Date,this.daterange.startDate.setDate(this.daterange.startDate.getDate()-30);const t=new Date;t.setDate(this.daterange.startDate.getDate()-90);const e=new Date;e.setDate(this.daterange.startDate.getDate()+23),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}selectedDate(t){this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.getLoanByDateRange(this.daterange.startDate,this.daterange.endDate)}getLoanByDateRange(t,e){return Object(o.a)(this,void 0,void 0,function*(){this.loanList=[],this.ledgerService.ledgers$.pipe(Object(s.a)(2)).subscribe(a=>{const n=a.filter(a=>a.createdAt.seconds>=t.getTime()/1e3&&a.createdAt.seconds<=e.getTime()/1e3);n.forEach(t=>{this.loanList.push(new L(t))}),console.log(t,e,n.length),this.loanList.sort(this.util.dynamicSortObject("createdAt"))})})}onModechange(t){switch(this.mode=t,t){case"day":this.adjustDay(0);break;case"range":this.getLoanByDateRange(this.daterange.startDate,this.daterange.endDate)}}adjustDay(t){let e=new Date(this.date.year,this.date.month-1,this.date.day+t);this.date=this.util.convertJsDateToNgbDate(e);const a=new Date(this.date.year,this.date.month-1,this.date.day);a.setHours(0,0,0,0);const n=new Date(this.date.year,this.date.month-1,this.date.day);n.setHours(23,59,59,999),this.getLoanByDateRange(a,n)}getDateString(){return this.date.day+"/"+this.date.month+"/"+this.date.year}getDateRangeString(){return this.util.getDateStringLocal(this.daterange.startDate)+" to "+this.util.getDateStringLocal(this.daterange.endDate)}onPrint(){window.print()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(m.a),r.Kb(l.a))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-loan-report"]],decls:21,vars:5,consts:[[1,"page-head","d-print-none"],[1,"d-flex","justify-content-between"],[1,""],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],[1,"container"],[1,"row","d-print-none"],[4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"col"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-auto"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto","p-0"],[1,"input-group","input-group-sm"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","click","ngModelChange","dateSelect"],["rDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],[1,"input-group","input-group-sm","mb-2"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-12"],[1,"text-center"],[3,"loanList"]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.Pb(1,"div",1),r.Pb(2,"div",2),r.xc(3,"Loan Report"),r.Ob(),r.Pb(4,"div",3),r.Pb(5,"a",4),r.Zb("click",function(){return e.onModechange("day")}),r.xc(6,"Day"),r.Ob(),r.Pb(7,"a",4),r.Zb("click",function(){return e.onModechange("range")}),r.xc(8,"Range"),r.Ob(),r.Ob(),r.Lb(9,"div",2),r.Ob(),r.Ob(),r.Pb(10,"div",5),r.Pb(11,"div",6),r.vc(12,M,17,1,"ng-container",7),r.vc(13,S,6,1,"div",8),r.Lb(14,"div",9),r.Pb(15,"div",10),r.Pb(16,"a",11),r.Zb("click",function(){return e.onPrint()}),r.Lb(17,"i",12),r.xc(18," Print "),r.Ob(),r.Ob(),r.Ob(),r.Pb(19,"div",13),r.vc(20,R,4,2,"div",14),r.Ob(),r.Ob()),2&t&&(r.yb(5),r.hc("ngClass","day"==e.mode?"btn-primary":"btn-light"),r.yb(2),r.hc("ngClass","range"==e.mode?"btn-primary":"btn-light"),r.yb(5),r.hc("ngIf","day"==e.mode),r.yb(1),r.hc("ngIf","range"==e.mode),r.yb(7),r.hc("ngIf",(null==e.loanList?null:e.loanList.length)>0))},directives:[u.l,u.n,h.f,y.a,y.i,y.l,c.b,k],styles:[""]}),t})();class I{constructor(t){this.createdAt=t.createdAt,this.sr_no=t.sr_no,this.year=t.year,this.customer=t.customer,this.agent=t.agent,this.quantity=t.quantity,this.rate=t.rate,this.service_amount=t.service_amount}}var j=a("BC91");function C(t,e){if(1&t&&(r.Pb(0,"tr"),r.Pb(1,"th",9),r.xc(2),r.Ob(),r.Pb(3,"td"),r.xc(4),r.cc(5,"date"),r.Ob(),r.Pb(6,"td"),r.xc(7),r.Ob(),r.Pb(8,"td"),r.xc(9),r.Ob(),r.Pb(10,"td"),r.xc(11),r.Ob(),r.Pb(12,"td",6),r.xc(13),r.cc(14,"numberToBangla"),r.Ob(),r.Pb(15,"td",6),r.xc(16),r.cc(17,"numberToBangla"),r.Ob(),r.Pb(18,"td",6),r.xc(19),r.cc(20,"currencyBd"),r.Ob(),r.Ob()),2&t){const t=e.$implicit,a=e.index;r.yb(2),r.yc(a+1),r.yb(2),r.zc(" ",r.ec(5,9,t.createdAt.toMillis(),"dd/MM/yyyy")," "),r.yb(3),r.zc(" ",t.sr_no," "),r.yb(2),r.Ac(" ",null==t||null==t.customer?null:t.customer.name,"[",null==t||null==t.customer?null:t.customer.phone,"]"),r.yb(2),r.zc(" ",null==t||null==t.agent?null:t.agent.name," "),r.yb(2),r.zc(" ",r.dc(14,12,null==t?null:t.quantity)," "),r.yb(3),r.zc(" ",r.dc(17,14,null==t?null:t.rate)," "),r.yb(3),r.zc(" ",r.dc(20,16,null==t?null:t.service_amount)," ")}}let Z=(()=>{class t{constructor(){this.total={quantity:0,service_amount:0}}ngOnChanges(t){t.productList&&this.productList.length>0&&this.calculateTotal()}calculateTotal(){this.total={quantity:0,service_amount:0},this.productList.forEach(t=>{this.total.quantity+=t.quantity,this.total.service_amount+=t.service_amount})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["product-table"]],inputs:{productList:"productList"},features:[r.wb],decls:40,vars:7,consts:[[1,"table","table-striped","border","table-sm"],["colspan","7",1,"form-head"],[1,"form-head","d-print-none"],["scope","col"],["scope","col","colspan","3",1,"text-center"],["colspan","5"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","5",1,"text-right"],["scope","row"]],template:function(t,e){1&t&&(r.Pb(0,"table",0),r.Pb(1,"thead"),r.Pb(2,"tr"),r.Pb(3,"td",1),r.xc(4," Loan List "),r.Ob(),r.Lb(5,"td",2),r.Ob(),r.Pb(6,"tr"),r.Pb(7,"th",3),r.xc(8,"#"),r.Ob(),r.Pb(9,"th",3),r.xc(10,"Date"),r.Ob(),r.Pb(11,"th",3),r.xc(12,"SR.NO."),r.Ob(),r.Pb(13,"th",3),r.xc(14,"Party"),r.Ob(),r.Pb(15,"th",3),r.xc(16,"Agent"),r.Ob(),r.Pb(17,"th",4),r.xc(18,"Product"),r.Ob(),r.Ob(),r.Pb(19,"tr"),r.Lb(20,"td",5),r.Pb(21,"th",6),r.xc(22,"Quantity"),r.Ob(),r.Pb(23,"th",6),r.xc(24,"Rate"),r.Ob(),r.Pb(25,"th",6),r.xc(26,"Payable"),r.Ob(),r.Ob(),r.Ob(),r.Pb(27,"tbody"),r.vc(28,C,21,18,"tr",7),r.Ob(),r.Pb(29,"tfoot"),r.Pb(30,"tr"),r.Pb(31,"th",8),r.xc(32,"Total"),r.Ob(),r.Pb(33,"th",6),r.xc(34),r.cc(35,"currencyBd"),r.Ob(),r.Lb(36,"th"),r.Pb(37,"th",6),r.xc(38),r.cc(39,"currencyBd"),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&t&&(r.yb(28),r.hc("ngForOf",e.productList),r.yb(6),r.yc(r.dc(35,3,e.total.quantity)),r.yb(4),r.yc(r.dc(39,5,e.total.service_amount)))},directives:[u.m],pipes:[_.a,u.d,j.a],styles:[""]}),t})();function T(t,e){if(1&t){const t=r.Qb();r.Nb(0),r.Pb(1,"div",15),r.Pb(2,"button",16),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(-1)}),r.Lb(3,"i",17),r.Ob(),r.Ob(),r.Pb(4,"div",18),r.Pb(5,"div",19),r.Pb(6,"div",20),r.Pb(7,"div",21),r.xc(8,"Date"),r.Ob(),r.Ob(),r.Pb(9,"input",22,23),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()})("ngModelChange",function(e){return r.pc(t),r.bc().date=e})("dateSelect",function(){return r.pc(t),r.bc().adjustDay(0)}),r.Ob(),r.Pb(11,"div",24),r.Pb(12,"button",25),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()}),r.Lb(13,"i",26),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Pb(14,"div",15),r.Pb(15,"button",16),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(1)}),r.Lb(16,"i",27),r.Ob(),r.Ob(),r.Mb()}if(2&t){const t=r.bc();r.yb(9),r.hc("ngModel",t.date)}}function A(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",15),r.Pb(1,"div",28),r.Pb(2,"div",20),r.Pb(3,"div",21),r.xc(4,"Date"),r.Ob(),r.Ob(),r.Pb(5,"input",29),r.Zb("selected",function(e){return r.pc(t),r.bc().selectedDate(e)}),r.Ob(),r.Ob(),r.Ob()}if(2&t){const t=r.bc();r.yb(5),r.hc("options",t.options)}}function z(t,e){if(1&t&&(r.Pb(0,"div",30),r.Pb(1,"h4",31),r.xc(2),r.Ob(),r.Lb(3,"product-table",32),r.Ob()),2&t){const t=r.bc();r.yb(2),r.zc("Product Report for ","day"==t.mode?"Date: "+t.getDateString():"Date range: "+t.getDateRangeString(),""),r.yb(1),r.hc("productList",t.productList)}}let q=(()=>{class t{constructor(t,e){this.ledgerService=t,this.util=e,this.mode="day",this.daterange={},this.productList=[],this.year=(new Date).getFullYear()}ngOnInit(){this.date=this.util.convertJsDateToNgbDate(new Date),this.setDateRanges(),this.onModechange("range")}setDateRanges(){this.daterange.endDate=new Date,this.daterange.startDate=new Date,this.daterange.startDate.setDate(this.daterange.startDate.getDate()-30);const t=new Date;t.setDate(this.daterange.startDate.getDate()-90);const e=new Date;e.setDate(this.daterange.startDate.getDate()+23),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}selectedDate(t){this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.getProductByDateRange(this.daterange.startDate,this.daterange.endDate)}onModechange(t){switch(this.mode=t,t){case"day":this.adjustDay(0);break;case"range":this.getProductByDateRange(this.daterange.startDate,this.daterange.endDate)}}adjustDay(t){let e=new Date(this.date.year,this.date.month-1,this.date.day+t);this.date=this.util.convertJsDateToNgbDate(e);const a=new Date(this.date.year,this.date.month-1,this.date.day);a.setHours(0,0,0,0);const n=new Date(this.date.year,this.date.month-1,this.date.day);n.setHours(23,59,59,999),this.getProductByDateRange(a,n)}getProductByDateRange(t,e){return Object(o.a)(this,void 0,void 0,function*(){this.productList=[],this.ledgerService.ledgers$.pipe(Object(s.a)(2)).subscribe(a=>{const n=a.filter(a=>a.createdAt.seconds>=t.getTime()/1e3&&a.createdAt.seconds<=e.getTime()/1e3);n.forEach(t=>{this.productList.push(new I(t))}),console.log(t,e,n.length),this.productList.sort(this.util.dynamicSortObject("createdAt"))})})}getDateString(){return this.date.day+"/"+this.date.month+"/"+this.date.year}getDateRangeString(){return this.util.getDateStringLocal(this.daterange.startDate)+" to "+this.util.getDateStringLocal(this.daterange.endDate)}onPrint(){window.print()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(m.a),r.Kb(l.a))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-product-report"]],decls:21,vars:5,consts:[[1,"page-head","d-print-none"],[1,"d-flex","justify-content-between"],[1,""],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],[1,"container"],[1,"row","d-print-none"],[4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"col"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-auto"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto","p-0"],[1,"input-group","input-group-sm"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","click","ngModelChange","dateSelect"],["rDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],[1,"input-group","input-group-sm","mb-2"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-12"],[1,"text-center"],[3,"productList"]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.Pb(1,"div",1),r.Pb(2,"div",2),r.xc(3,"Product Report"),r.Ob(),r.Pb(4,"div",3),r.Pb(5,"a",4),r.Zb("click",function(){return e.onModechange("day")}),r.xc(6,"Day"),r.Ob(),r.Pb(7,"a",4),r.Zb("click",function(){return e.onModechange("range")}),r.xc(8,"Range"),r.Ob(),r.Ob(),r.Lb(9,"div",2),r.Ob(),r.Ob(),r.Pb(10,"div",5),r.Pb(11,"div",6),r.vc(12,T,17,1,"ng-container",7),r.vc(13,A,6,1,"div",8),r.Lb(14,"div",9),r.Pb(15,"div",10),r.Pb(16,"a",11),r.Zb("click",function(){return e.onPrint()}),r.Lb(17,"i",12),r.xc(18," Print "),r.Ob(),r.Ob(),r.Ob(),r.Pb(19,"div",13),r.vc(20,z,4,2,"div",14),r.Ob(),r.Ob()),2&t&&(r.yb(5),r.hc("ngClass","day"==e.mode?"btn-primary":"btn-light"),r.yb(2),r.hc("ngClass","range"==e.mode?"btn-primary":"btn-light"),r.yb(5),r.hc("ngIf","day"==e.mode),r.yb(1),r.hc("ngIf","range"==e.mode),r.yb(7),r.hc("ngIf",(null==e.productList?null:e.productList.length)>0))},directives:[u.l,u.n,h.f,y.a,y.i,y.l,c.b,Z],styles:[""]}),t})();var N=a("HK7g");function E(t,e){if(1&t&&(r.Pb(0,"tr"),r.Pb(1,"th",8),r.xc(2),r.Ob(),r.Pb(3,"td"),r.xc(4),r.cc(5,"date"),r.Ob(),r.Pb(6,"td"),r.xc(7),r.Ob(),r.Pb(8,"td"),r.xc(9),r.Ob(),r.Pb(10,"td"),r.xc(11),r.Ob(),r.Pb(12,"td",7),r.xc(13),r.cc(14,"numberToBangla"),r.Ob(),r.Pb(15,"td",7),r.xc(16),r.cc(17,"currencyBd"),r.Ob(),r.Pb(18,"td",7),r.xc(19),r.cc(20,"currencyBd"),r.Ob(),r.Pb(21,"td",7),r.xc(22),r.cc(23,"currencyBd"),r.Ob(),r.Pb(24,"td",7),r.xc(25),r.cc(26,"currencyBd"),r.Ob(),r.Ob()),2&t){const t=e.$implicit,a=e.index;r.yb(2),r.yc(a+1),r.yb(2),r.zc(" ",r.ec(5,10,t.createdAt.toMillis(),"dd/MM/yyyy")," "),r.yb(3),r.yc(t.sr_no),r.yb(2),r.zc(" ",t.customer.name," "),r.yb(2),r.zc(" ",t.customer.phone," "),r.yb(2),r.yc(r.dc(14,13,t.quantity)),r.yb(3),r.yc(r.dc(17,15,t.service_rent)),r.yb(3),r.yc(r.dc(20,17,t.emptyBag_amount)),r.yb(3),r.yc(r.dc(23,19,t.loan_payable)),r.yb(3),r.yc(r.dc(26,21,t.total))}}let F=(()=>{class t{constructor(){this.total={quantity:0,service_rent:0,emptyBag_amount:0,loan_payable:0,total:0}}ngOnChanges(t){t.deliveryList&&this.deliveryList.length>0&&this.calculateTotal()}calculateTotal(){this.total={quantity:0,service_rent:0,emptyBag_amount:0,loan_payable:0,total:0},this.deliveryList.forEach(t=>{this.total.quantity+=t.quantity,this.total.service_rent+=t.service_rent,this.total.emptyBag_amount+=t.emptyBag_amount,this.total.loan_payable+=t.loan_payable,this.total.total+=t.total})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["delivery-table"]],inputs:{deliveryList:"deliveryList"},features:[r.wb],decls:48,vars:16,consts:[[1,"table","table-striped","border","table-sm"],["colspan","9",1,"form-head"],[1,"form-head","d-print-none"],["scope","col"],["scope","col",1,"text-right"],[4,"ngFor","ngForOf"],["colspan","5",1,"text-right"],[1,"text-right"],["scope","row"]],template:function(t,e){1&t&&(r.Pb(0,"table",0),r.Pb(1,"thead"),r.Pb(2,"tr"),r.Pb(3,"td",1),r.xc(4," Delivery List "),r.Ob(),r.Lb(5,"td",2),r.Ob(),r.Pb(6,"tr"),r.Pb(7,"th",3),r.xc(8,"#"),r.Ob(),r.Pb(9,"th",3),r.xc(10,"Date"),r.Ob(),r.Pb(11,"th",3),r.xc(12,"SR_No"),r.Ob(),r.Pb(13,"th",3),r.xc(14,"Party"),r.Ob(),r.Pb(15,"th",3),r.xc(16,"Phone"),r.Ob(),r.Pb(17,"th",4),r.xc(18,"Quantity"),r.Ob(),r.Pb(19,"th",4),r.xc(20,"Rent"),r.Ob(),r.Pb(21,"th",4),r.xc(22,"Empty bag"),r.Ob(),r.Pb(23,"th",4),r.xc(24,"Loan"),r.Ob(),r.Pb(25,"th",4),r.xc(26,"Total"),r.Ob(),r.Ob(),r.Ob(),r.Pb(27,"tbody"),r.vc(28,E,27,23,"tr",5),r.Ob(),r.Pb(29,"tfoot"),r.Pb(30,"tr"),r.Pb(31,"th",6),r.xc(32,"Total"),r.Ob(),r.Pb(33,"th",7),r.xc(34),r.cc(35,"numberToBangla"),r.Ob(),r.Pb(36,"th",7),r.xc(37),r.cc(38,"currencyBd"),r.Ob(),r.Pb(39,"th",7),r.xc(40),r.cc(41,"currencyBd"),r.Ob(),r.Pb(42,"th",7),r.xc(43),r.cc(44,"currencyBd"),r.Ob(),r.Pb(45,"th",7),r.xc(46),r.cc(47,"currencyBd"),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&t&&(r.yb(28),r.hc("ngForOf",e.deliveryList),r.yb(6),r.yc(r.dc(35,6,e.total.quantity)),r.yb(3),r.yc(r.dc(38,8,e.total.service_rent)),r.yb(3),r.yc(r.dc(41,10,e.total.emptyBag_amount)),r.yb(3),r.yc(r.dc(44,12,e.total.loan_payable)),r.yb(3),r.yc(r.dc(47,14,e.total.total)))},directives:[u.m],pipes:[j.a,_.a,u.d],styles:[""]}),t})();function Q(t,e){if(1&t){const t=r.Qb();r.Nb(0),r.Pb(1,"div",15),r.Pb(2,"button",16),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(-1)}),r.Lb(3,"i",17),r.Ob(),r.Ob(),r.Pb(4,"div",18),r.Pb(5,"div",19),r.Pb(6,"div",20),r.Pb(7,"div",21),r.xc(8,"Date"),r.Ob(),r.Ob(),r.Pb(9,"input",22,23),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()})("ngModelChange",function(e){return r.pc(t),r.bc().date=e})("dateSelect",function(){return r.pc(t),r.bc().adjustDay(0)}),r.Ob(),r.Pb(11,"div",24),r.Pb(12,"button",25),r.Zb("click",function(){return r.pc(t),r.oc(10).toggle()}),r.Lb(13,"i",26),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Pb(14,"div",15),r.Pb(15,"button",16),r.Zb("click",function(){return r.pc(t),r.bc().adjustDay(1)}),r.Lb(16,"i",27),r.Ob(),r.Ob(),r.Mb()}if(2&t){const t=r.bc();r.yb(9),r.hc("ngModel",t.date)}}function Y(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",15),r.Pb(1,"div",28),r.Pb(2,"div",20),r.Pb(3,"div",21),r.xc(4,"Date"),r.Ob(),r.Ob(),r.Pb(5,"input",29),r.Zb("selected",function(e){return r.pc(t),r.bc().selectedDate(e)}),r.Ob(),r.Ob(),r.Ob()}if(2&t){const t=r.bc();r.yb(5),r.hc("options",t.options)}}function K(t,e){if(1&t&&(r.Pb(0,"div",30),r.Pb(1,"h4",31),r.xc(2),r.Ob(),r.Lb(3,"delivery-table",32),r.Ob()),2&t){const t=r.bc();r.yb(2),r.zc("Delivery Report for ","day"==t.mode?"Date: "+t.getDateString():"Date range: "+t.getDateRangeString(),""),r.yb(1),r.hc("deliveryList",t.deliveryList)}}let J=(()=>{class t{constructor(t,e){this.deliveryService=t,this.util=e,this.mode="day",this.daterange={},this.deliveryList=[],this.year=(new Date).getFullYear()}ngOnInit(){this.date=this.util.convertJsDateToNgbDate(new Date),this.setDateRanges(),this.onModechange("day")}setDateRanges(){this.daterange.endDate=new Date,this.daterange.startDate=new Date,this.daterange.startDate.setDate(this.daterange.startDate.getDate()-30);const t=new Date;t.setDate(this.daterange.startDate.getDate()-90);const e=new Date;e.setDate(this.daterange.startDate.getDate()+23),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}selectedDate(t){this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.getDeliveryByDateRange(this.daterange.startDate,this.daterange.endDate)}getDeliveryByDateRange(t,e){return Object(o.a)(this,void 0,void 0,function*(){this.deliveryList=[],this.deliveryService.deliverys$.pipe(Object(s.a)(2)).subscribe(a=>{const n=a.filter(a=>a.createdAt.seconds>=t.getTime()/1e3&&a.createdAt.seconds<=e.getTime()/1e3);this.deliveryList=n,console.log(t,e,this.deliveryList.length),this.deliveryList.sort(this.util.dynamicSortObject("createdAt"))})})}onModechange(t){switch(this.mode=t,t){case"day":this.adjustDay(0);break;case"range":this.getDeliveryByDateRange(this.daterange.startDate,this.daterange.endDate)}}adjustDay(t){let e=new Date(this.date.year,this.date.month-1,this.date.day+t);this.date=this.util.convertJsDateToNgbDate(e);const a=new Date(this.date.year,this.date.month-1,this.date.day);a.setHours(0,0,0,0);const n=new Date(this.date.year,this.date.month-1,this.date.day);n.setHours(23,59,59,999),this.getDeliveryByDateRange(a,n)}getDateString(){return this.date.day+"/"+this.date.month+"/"+this.date.year}getDateRangeString(){return this.util.getDateStringLocal(this.daterange.startDate)+" to "+this.util.getDateStringLocal(this.daterange.endDate)}onPrint(){window.print()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(N.a),r.Kb(l.a))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-delivery-report-date"]],decls:21,vars:5,consts:[[1,"page-head","d-print-none"],[1,"d-flex","justify-content-between"],[1,""],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],[1,"container"],[1,"row","d-print-none"],[4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"col"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-auto"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto","p-0"],[1,"input-group","input-group-sm"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","click","ngModelChange","dateSelect"],["rDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],[1,"input-group","input-group-sm","mb-2"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-12"],[1,"text-center"],[3,"deliveryList"]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.Pb(1,"div",1),r.Pb(2,"div",2),r.xc(3,"Delivery Report"),r.Ob(),r.Pb(4,"div",3),r.Pb(5,"a",4),r.Zb("click",function(){return e.onModechange("day")}),r.xc(6,"Day"),r.Ob(),r.Pb(7,"a",4),r.Zb("click",function(){return e.onModechange("range")}),r.xc(8,"Range"),r.Ob(),r.Ob(),r.Lb(9,"div",2),r.Ob(),r.Ob(),r.Pb(10,"div",5),r.Pb(11,"div",6),r.vc(12,Q,17,1,"ng-container",7),r.vc(13,Y,6,1,"div",8),r.Lb(14,"div",9),r.Pb(15,"div",10),r.Pb(16,"a",11),r.Zb("click",function(){return e.onPrint()}),r.Lb(17,"i",12),r.xc(18," Print "),r.Ob(),r.Ob(),r.Ob(),r.Pb(19,"div",13),r.vc(20,K,4,2,"div",14),r.Ob(),r.Ob()),2&t&&(r.yb(5),r.hc("ngClass","day"==e.mode?"btn-primary":"btn-light"),r.yb(2),r.hc("ngClass","range"==e.mode?"btn-primary":"btn-light"),r.yb(5),r.hc("ngIf","day"==e.mode),r.yb(1),r.hc("ngIf","range"==e.mode),r.yb(7),r.hc("ngIf",(null==e.deliveryList?null:e.deliveryList.length)>0))},directives:[u.l,u.n,h.f,y.a,y.i,y.l,c.b,F],styles:[""]}),t})();var H=a("Kj3r"),$=a("/uUt"),U=a("lJxs");function X(t,e){if(1&t&&(r.Pb(0,"table",13),r.Pb(1,"thead"),r.Pb(2,"tr"),r.Pb(3,"td",14),r.xc(4," Ledger info "),r.Ob(),r.Ob(),r.Pb(5,"tr"),r.Pb(6,"th",15),r.xc(7,"#"),r.Ob(),r.Pb(8,"th",15),r.xc(9,"SR_No"),r.Ob(),r.Pb(10,"th",15),r.xc(11,"Party"),r.Ob(),r.Pb(12,"th",15),r.xc(13,"Loan"),r.Ob(),r.Pb(14,"th",15),r.xc(15,"Product"),r.Ob(),r.Pb(16,"th",15),r.xc(17,"Empty bag"),r.Ob(),r.Pb(18,"th",15),r.xc(19,"Total"),r.Ob(),r.Ob(),r.Ob(),r.Pb(20,"tbody"),r.Pb(21,"tr"),r.Pb(22,"th",16),r.xc(23,"1"),r.Ob(),r.Pb(24,"td"),r.xc(25),r.Ob(),r.Pb(26,"td"),r.Pb(27,"div"),r.xc(28),r.Ob(),r.Pb(29,"div"),r.xc(30),r.Ob(),r.Pb(31,"div"),r.xc(32),r.Ob(),r.Ob(),r.Pb(33,"td"),r.Pb(34,"div"),r.Pb(35,"div"),r.xc(36),r.Ob(),r.Pb(37,"div"),r.xc(38),r.Ob(),r.Pb(39,"div"),r.xc(40),r.Ob(),r.Ob(),r.Ob(),r.Pb(41,"td"),r.Pb(42,"div"),r.xc(43),r.Ob(),r.Pb(44,"div"),r.xc(45),r.Ob(),r.Pb(46,"div"),r.xc(47),r.Ob(),r.Ob(),r.Pb(48,"td"),r.Pb(49,"div"),r.Pb(50,"div"),r.xc(51),r.Ob(),r.Pb(52,"div"),r.xc(53),r.Ob(),r.Pb(54,"div"),r.xc(55),r.Ob(),r.Ob(),r.Ob(),r.Pb(56,"td"),r.xc(57),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&t){const t=r.bc();r.yb(25),r.yc(t.ledger.sr_no),r.yb(3),r.Ac("Name : ",null==t.ledger.customer?null:t.ledger.customer.name," [",null==t.ledger.customer?null:t.ledger.customer.phone,"]"),r.yb(2),r.zc("C/O : ",null==t.ledger.customer?null:t.ledger.customer.father,""),r.yb(2),r.yc(null==t.ledger.customer?null:t.ledger.customer.address),r.yb(4),r.zc("Amount: ",t.ledger.loan_amount," "),r.yb(2),r.zc("Rate: ",t.ledger.loan_rate," "),r.yb(2),r.zc("Payable: ",t.ledger.loan_payable," "),r.yb(3),r.zc("Quanity: ",t.ledger.quantity," "),r.yb(2),r.zc("Rate: ",t.ledger.rate," "),r.yb(2),r.zc("Amount: ",t.ledger.service_amount," "),r.yb(4),r.zc("Quanity: ",t.ledger.emptyBag_quantity," "),r.yb(2),r.zc("Rate: ",t.ledger.emptyBag_rate," "),r.yb(2),r.zc("Amount: ",t.ledger.emptyBag_amount," "),r.yb(2),r.yc(t.ledger.total_amount)}}function G(t,e){if(1&t&&(r.Pb(0,"tr"),r.Pb(1,"td",16),r.xc(2),r.Ob(),r.Pb(3,"td",16),r.xc(4),r.Ob(),r.Pb(5,"td"),r.Pb(6,"div"),r.xc(7),r.Ob(),r.Pb(8,"div"),r.xc(9),r.Ob(),r.Pb(10,"div"),r.xc(11),r.Ob(),r.Ob(),r.Pb(12,"td",22),r.xc(13),r.Ob(),r.Pb(14,"td",22),r.xc(15),r.Ob(),r.Pb(16,"td",22),r.xc(17),r.Ob(),r.Pb(18,"td",22),r.xc(19),r.Ob(),r.Pb(20,"td",22),r.xc(21),r.Ob(),r.Pb(22,"td",22),r.xc(23),r.Ob(),r.Pb(24,"th",22),r.xc(25),r.Ob(),r.Ob()),2&t){const t=e.$implicit,a=e.index;r.yb(2),r.yc(a+1),r.yb(2),r.yc(t.sr_no),r.yb(3),r.yc(t.customer.name),r.yb(2),r.yc(t.customer.phone),r.yb(2),r.yc(t.customer.address),r.yb(2),r.yc(null==t?null:t.loan_amount),r.yb(2),r.yc(null==t?null:t.loan_payable),r.yb(2),r.yc(null==t?null:t.quantity),r.yb(2),r.yc(null==t?null:t.service_rent),r.yb(2),r.yc(t.emptyBag_quantity),r.yb(2),r.yc(t.emptyBag_amount),r.yb(2),r.yc(t.total)}}function V(t,e){if(1&t&&(r.Pb(0,"table",17),r.Pb(1,"thead"),r.Pb(2,"tr"),r.Pb(3,"td",18),r.xc(4," Delivery info "),r.Ob(),r.Ob(),r.Pb(5,"tr"),r.Pb(6,"th",19),r.xc(7,"#"),r.Ob(),r.Pb(8,"th",19),r.xc(9,"SR_No"),r.Ob(),r.Pb(10,"th",19),r.xc(11,"Party"),r.Ob(),r.Pb(12,"th",20),r.xc(13,"Loan"),r.Ob(),r.Pb(14,"th",20),r.xc(15,"Product"),r.Ob(),r.Pb(16,"th",20),r.xc(17,"Empty Bag"),r.Ob(),r.Pb(18,"th",19),r.xc(19,"Total"),r.Ob(),r.Ob(),r.Pb(20,"tr"),r.Pb(21,"th"),r.xc(22,"Amount"),r.Ob(),r.Pb(23,"th"),r.xc(24,"Payable"),r.Ob(),r.Pb(25,"th"),r.xc(26,"Quantity"),r.Ob(),r.Pb(27,"th"),r.xc(28,"Rent"),r.Ob(),r.Pb(29,"th"),r.xc(30,"Quanity"),r.Ob(),r.Pb(31,"th"),r.xc(32,"Price"),r.Ob(),r.Ob(),r.Ob(),r.Pb(33,"tbody"),r.vc(34,G,26,12,"tr",21),r.Pb(35,"tr"),r.Lb(36,"td"),r.Lb(37,"td"),r.Lb(38,"td"),r.Pb(39,"th",22),r.xc(40),r.Ob(),r.Pb(41,"th",22),r.xc(42),r.Ob(),r.Pb(43,"th",22),r.xc(44),r.Ob(),r.Pb(45,"th",22),r.xc(46),r.Ob(),r.Pb(47,"th",22),r.xc(48),r.Ob(),r.Pb(49,"th",22),r.xc(50),r.Ob(),r.Pb(51,"th",22),r.xc(52),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&t){const t=r.bc();r.yb(34),r.hc("ngForOf",t.deliveryList),r.yb(6),r.yc(t.delivery_total.loan_amount),r.yb(2),r.yc(t.delivery_total.loan_payable),r.yb(2),r.yc(t.delivery_total.quantity),r.yb(2),r.yc(t.delivery_total.service_rent),r.yb(2),r.yc(t.delivery_total.emptyBag_quantity),r.yb(2),r.yc(t.delivery_total.emptyBag_amount),r.yb(2),r.yc(t.delivery_total.total)}}const W=[{path:"inventory-report",component:P},{path:"loan-report",component:B},{path:"ledger-report",component:x},{path:"product-report",component:q},{path:"delivery-report-date",component:J},{path:"delivery-report-sr",component:(()=>{class t{constructor(t,e){this.ledgerService=t,this.deliveryService=e,this.searchLedger=t=>t.pipe(Object(H.a)(200),Object($.a)(),Object(U.a)(t=>(t.length<2?[]:this.ledgerList.filter(e=>e.sr_no.indexOf(t.toLowerCase())>-1&&e.year==this.year).slice(0,10)).map(t=>t.sr_no))),this.year=(new Date).getFullYear(),this.getLedgerforyear(this.year),this.delivery_total={quantity:0,service_rent:0,loan_amount:0,loan_profit:0,loan_payable:0,emptyBag_quantity:0,emptyBag_amount:0,total:0}}ngOnInit(){}getLedgerforyear(t){return Object(o.a)(this,void 0,void 0,function*(){this.ledgerService.ledgers$.pipe(Object(s.a)(2)).subscribe(e=>{this.ledgerList=e.filter(e=>e.year==t)})})}onSelectSRNo(t){this.ledger=this.ledgerList.find(e=>e.sr_no==t.item&&e.year==this.year),this.deliveryList=this.deliveryService._getBySrAndYear(t.item,this.year);let e={quantity:0,service_rent:0,loan_amount:0,loan_profit:0,loan_payable:0,emptyBag_quantity:0,emptyBag_amount:0,total:0};this.deliveryList&&this.deliveryList.length>0&&(this.deliveryList.forEach(t=>{e.quantity+=t.quantity,e.service_rent+=t.service_rent,e.loan_amount+=t.loan_amount,e.loan_payable+=t.loan_payable,e.emptyBag_quantity+=t.emptyBag_quantity,e.emptyBag_amount+=t.emptyBag_amount,e.total+=t.total}),this.delivery_total=e,console.log(this.ledger),console.log(this.deliveryList))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(m.a),r.Kb(N.a))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-delivery-report-sr-no"]],decls:14,vars:4,consts:[[1,"page-head","d-print-none"],[1,"d-flex","justify-content-between"],[1,""],[1,"container"],[1,"row","d-print-none"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-filter"],["id","sr_no","type","text","placeholder","Sr no / Invoice no.",1,"form-control","form-control-sm",3,"ngbTypeahead","editable","selectItem"],["class","table table-striped border table-sm",4,"ngIf"],["class","table table-bordered table-sm",4,"ngIf"],[1,"table","table-striped","border","table-sm"],["colspan","8",1,"form-head"],["scope","col"],["scope","row"],[1,"table","table-bordered","table-sm"],["colspan","10",1,"form-head"],["rowspan","2","scope","col"],["colspan","2","scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.Pb(1,"div",1),r.Pb(2,"div",2),r.xc(3,"Delivery Report by SR no."),r.Ob(),r.Ob(),r.Ob(),r.Pb(4,"div",3),r.Pb(5,"div",4),r.Pb(6,"div",5),r.Pb(7,"div",6),r.Pb(8,"div",7),r.Pb(9,"div",8),r.Lb(10,"i",9),r.Ob(),r.Ob(),r.Pb(11,"input",10),r.Zb("selectItem",function(t){return e.onSelectSRNo(t)}),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.vc(12,X,58,15,"table",11),r.vc(13,V,53,8,"table",12),r.Ob()),2&t&&(r.yb(11),r.hc("ngbTypeahead",e.searchLedger)("editable",!1),r.yb(1),r.hc("ngIf",e.ledger),r.yb(1),r.hc("ngIf",e.deliveryList&&e.deliveryList.length>0))},directives:[h.j,u.n,u.m],styles:[""]}),t})()},{path:"",component:b}];let tt=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[i.a,c.a,n.e.forChild(W)]]}),t})()}}]);